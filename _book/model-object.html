<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title></title>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
  <meta name="description" content="">
  <meta name="generator" content="bookdown 0.3 and GitBook 2.6.7">

  <meta property="og:title" content="" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="parameter-object.html">
<link rel="next" href="task-properties-object.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />










</head>

<body>


  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>MDL User Guide and Reference Manual</a></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html#mdl-development-team"><i class="fa fa-check"></i>MDL Development Team</a></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html#mdl-contributors"><i class="fa fa-check"></i>MDL Contributors</a></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html#further-information"><i class="fa fa-check"></i>Further Information:</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#why-write-a-new-language"><i class="fa fa-check"></i><b>1.1</b> Why write a new language?</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#integrated-language-standards"><i class="fa fa-check"></i><b>1.2</b> Integrated language standards</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#mdl-in-use"><i class="fa fa-check"></i><b>1.3</b> MDL in use</a></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#mdl-components-and-structure"><i class="fa fa-check"></i><b>1.4</b> MDL components and structure</a><ul>
<li class="chapter" data-level="1.4.1" data-path="introduction.html"><a href="introduction.html#independence-of-mdl-objects"><i class="fa fa-check"></i><b>1.4.1</b> Independence of MDL objects</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="introduction.html"><a href="introduction.html#task-execution-with-the-ddmore-r-package"><i class="fa fa-check"></i><b>1.5</b> Task Execution with the ddmore R package</a></li>
<li class="chapter" data-level="1.6" data-path="introduction.html"><a href="introduction.html#the-mdl-integrated-development-environment"><i class="fa fa-check"></i><b>1.6</b> The MDL Integrated Development Environment</a></li>
<li class="chapter" data-level="1.7" data-path="introduction.html"><a href="introduction.html#on-interoperability"><i class="fa fa-check"></i><b>1.7</b> On interoperability</a></li>
<li class="chapter" data-level="1.8" data-path="introduction.html"><a href="introduction.html#evolution-of-mdl"><i class="fa fa-check"></i><b>1.8</b> Evolution of MDL</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data-object.html"><a href="data-object.html"><i class="fa fa-check"></i><b>2</b> Data Object</a><ul>
<li class="chapter" data-level="2.1" data-path="data-object.html"><a href="data-object.html#subsetting-data-for-analysis"><i class="fa fa-check"></i><b>2.1</b> Subsetting data for analysis</a></li>
<li class="chapter" data-level="2.2" data-path="data-object.html"><a href="data-object.html#data_input_variables"><i class="fa fa-check"></i><b>2.2</b> <code>DATA_INPUT_VARIABLES</code></a><ul>
<li class="chapter" data-level="2.2.1" data-path="data-object.html"><a href="data-object.html#defining-dose-amount"><i class="fa fa-check"></i><b>2.2.1</b> Defining dose amount</a></li>
<li class="chapter" data-level="2.2.2" data-path="data-object.html"><a href="data-object.html#defining-the-independent-variable"><i class="fa fa-check"></i><b>2.2.2</b> Defining the independent variable</a></li>
<li class="chapter" data-level="2.2.3" data-path="data-object.html"><a href="data-object.html#defining-the-dependent-variable"><i class="fa fa-check"></i><b>2.2.3</b> Defining the dependent variable</a></li>
<li class="chapter" data-level="2.2.4" data-path="data-object.html"><a href="data-object.html#mapping-data-variables-to-model-variability-levels"><i class="fa fa-check"></i><b>2.2.4</b> Mapping data variables to model variability levels</a></li>
<li class="chapter" data-level="2.2.5" data-path="data-object.html"><a href="data-object.html#spandefining-covariates"><i class="fa fa-check"></i><b>2.2.5</b> span&gt;Defining covariates</a></li>
<li class="chapter" data-level="2.2.6" data-path="data-object.html"><a href="data-object.html#defining-model-inputs-or-time-varying-covariates"><i class="fa fa-check"></i><b>2.2.6</b> Defining model inputs or time-varying covariates</a></li>
<li class="chapter" data-level="2.2.7" data-path="data-object.html"><a href="data-object.html#assignment-to-a-single-variable-using-variable-name"><i class="fa fa-check"></i><b>2.2.7</b> Assignment to a single variable using <code>variable = &lt;NAME&gt;</code></a></li>
<li class="chapter" data-level="2.2.8" data-path="data-object.html"><a href="data-object.html#assignment-to-multiple-variables-using-define"><i class="fa fa-check"></i><b>2.2.8</b> Assignment to multiple variables using <code>“define = &lt; … &gt;”</code></a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="data-object.html"><a href="data-object.html#source"><i class="fa fa-check"></i><b>2.3</b> <code>SOURCE</code></a></li>
<li class="chapter" data-level="2.4" data-path="data-object.html"><a href="data-object.html#declared_variables"><i class="fa fa-check"></i><b>2.4</b> <code>DECLARED_VARIABLES</code></a></li>
<li class="chapter" data-level="2.5" data-path="data-object.html"><a href="data-object.html#data_derived_variables"><i class="fa fa-check"></i><b>2.5</b> <code>DATA_DERIVED_VARIABLES</code></a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="parameter-object.html"><a href="parameter-object.html"><i class="fa fa-check"></i><b>3</b> Parameter Object</a><ul>
<li class="chapter" data-level="3.1" data-path="parameter-object.html"><a href="parameter-object.html#structural"><i class="fa fa-check"></i><b>3.1</b> <code>STRUCTURAL</code></a><ul>
<li class="chapter" data-level="3.1.1" data-path="parameter-object.html"><a href="parameter-object.html#note-on-parameter-values"><i class="fa fa-check"></i><b>3.1.1</b> Note on parameter values</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="parameter-object.html"><a href="parameter-object.html#variability"><i class="fa fa-check"></i><b>3.2</b> <code>VARIABILITY</code></a><ul>
<li class="chapter" data-level="3.2.1" data-path="parameter-object.html"><a href="parameter-object.html#parameter-naming"><i class="fa fa-check"></i><b>3.2.1</b> Parameter naming</a></li>
<li class="chapter" data-level="3.2.2" data-path="parameter-object.html"><a href="parameter-object.html#covariances-and-correlations"><i class="fa fa-check"></i><b>3.2.2</b> Covariances and Correlations</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="model-object.html"><a href="model-object.html"><i class="fa fa-check"></i><b>4</b> Model Object</a><ul>
<li class="chapter" data-level="4.1" data-path="model-object.html"><a href="model-object.html#on-interoperability-1"><i class="fa fa-check"></i><b>4.1</b> On interoperability</a></li>
<li class="chapter" data-level="4.2" data-path="model-object.html"><a href="model-object.html#idv"><i class="fa fa-check"></i><b>4.2</b> <code>IDV</code></a></li>
<li class="chapter" data-level="4.3" data-path="model-object.html"><a href="model-object.html#covariates"><i class="fa fa-check"></i><b>4.3</b> <code>COVARIATES</code></a></li>
<li class="chapter" data-level="4.4" data-path="model-object.html"><a href="model-object.html#structural_parameters"><i class="fa fa-check"></i><b>4.4</b> <code>STRUCTURAL_PARAMETERS</code></a></li>
<li class="chapter" data-level="4.5" data-path="model-object.html"><a href="model-object.html#variability_parameters"><i class="fa fa-check"></i><b>4.5</b> <code>VARIABILITY_PARAMETERS</code></a><ul>
<li class="chapter" data-level="4.5.1" data-path="model-object.html"><a href="model-object.html#residual-unexplained-variability"><i class="fa fa-check"></i><b>4.5.1</b> Residual Unexplained Variability</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="model-object.html"><a href="model-object.html#variability_levels"><i class="fa fa-check"></i><b>4.6</b> <code>VARIABILITY_LEVELS</code></a></li>
<li class="chapter" data-level="4.7" data-path="model-object.html"><a href="model-object.html#group_variables"><i class="fa fa-check"></i><b>4.7</b> <code>GROUP_VARIABLES</code></a><ul>
<li class="chapter" data-level="4.7.1" data-path="model-object.html"><a href="model-object.html#defining-model-constants"><i class="fa fa-check"></i><b>4.7.1</b> Defining model constants</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="model-object.html"><a href="model-object.html#random_variable_definition"><i class="fa fa-check"></i><b>4.8</b> <code>RANDOM_VARIABLE_DEFINITION</code></a></li>
<li class="chapter" data-level="4.9" data-path="model-object.html"><a href="model-object.html#individual_variables"><i class="fa fa-check"></i><b>4.9</b> <code>INDIVIDUAL_VARIABLES</code></a><ul>
<li class="chapter" data-level="4.9.1" data-path="model-object.html"><a href="model-object.html#mixed-effect-model-with-linear-fixed-effects-and-normally-distributed"><i class="fa fa-check"></i><b>4.9.1</b> Mixed effect model with linear fixed effects and normally distributed</a></li>
<li class="chapter" data-level="4.9.2" data-path="model-object.html"><a href="model-object.html#general-mixed-effect-model-with-gaussian-random-effects."><i class="fa fa-check"></i><b>4.9.2</b> General mixed effect model with Gaussian random effects.</a></li>
<li class="chapter" data-level="4.9.3" data-path="model-object.html"><a href="model-object.html#mixed-effect-model-defined-by-equations"><i class="fa fa-check"></i><b>4.9.3</b> Mixed effect model defined by equations</a></li>
<li class="chapter" data-level="4.9.4" data-path="model-object.html"><a href="model-object.html#individual_variables-without-inter-individual-variability"><i class="fa fa-check"></i><b>4.9.4</b> INDIVIDUAL_VARIABLES without inter-individual variability</a></li>
<li class="chapter" data-level="4.9.5" data-path="model-object.html"><a href="model-object.html#individual_variables-where-the-variable-is-defined-in-the"><i class="fa fa-check"></i><b>4.9.5</b> <a href="model-object.html#individual_variables"><code>INDIVIDUAL_VARIABLES</code></a> where the variable is defined in the</a></li>
<li class="chapter" data-level="4.9.6" data-path="model-object.html"><a href="model-object.html#conditional-assignment-of-individual_variables"><i class="fa fa-check"></i><b>4.9.6</b> Conditional assignment of <a href="model-object.html#individual_variables"><code>INDIVIDUAL_VARIABLES</code></a></a></li>
<li class="chapter" data-level="4.9.7" data-path="model-object.html"><a href="model-object.html#individual_variables-definitions-in-practice."><i class="fa fa-check"></i><b>4.9.7</b> <a href="model-object.html#individual_variables"><code>INDIVIDUAL_VARIABLES</code></a> definitions in practice.</a></li>
</ul></li>
<li class="chapter" data-level="4.10" data-path="model-object.html"><a href="model-object.html#model_prediction"><i class="fa fa-check"></i><b>4.10</b> <code>MODEL_PREDICTION</code></a><ul>
<li class="chapter" data-level="4.10.1" data-path="model-object.html"><a href="model-object.html#deq"><i class="fa fa-check"></i><b>4.10.1</b> <code>DEQ</code></a></li>
<li class="chapter" data-level="4.10.2" data-path="model-object.html"><a href="model-object.html#on-tlag-and-bioavailability"><i class="fa fa-check"></i><b>4.10.2</b> On Tlag and Bioavailability</a></li>
<li class="chapter" data-level="4.10.3" data-path="model-object.html"><a href="model-object.html#compartment"><i class="fa fa-check"></i><b>4.10.3</b> <code>COMPARTMENT</code></a></li>
</ul></li>
<li class="chapter" data-level="4.11" data-path="model-object.html"><a href="model-object.html#combining-compartment-and-deq-blocks"><i class="fa fa-check"></i><b>4.11</b> Combining <a href="model-object.html#compartment"><code>COMPARTMENT</code></a> and <a href="model-object.html#deq"><code>DEQ</code></a> blocks</a></li>
<li class="chapter" data-level="4.12" data-path="model-object.html"><a href="model-object.html#observation"><i class="fa fa-check"></i><b>4.12</b> <code>OBSERVATION</code></a><ul>
<li class="chapter" data-level="4.12.1" data-path="model-object.html"><a href="model-object.html#continuous-outcomes"><i class="fa fa-check"></i><b>4.12.1</b> Continuous outcomes</a></li>
<li class="chapter" data-level="4.12.2" data-path="model-object.html"><a href="model-object.html#discrete-data"><i class="fa fa-check"></i><b>4.12.2</b> Discrete data</a></li>
<li class="chapter" data-level="4.12.3" data-path="model-object.html"><a href="model-object.html#time-to-event-data"><i class="fa fa-check"></i><b>4.12.3</b> Time to event data</a></li>
</ul></li>
<li class="chapter" data-level="4.13" data-path="model-object.html"><a href="model-object.html#functions"><i class="fa fa-check"></i><b>4.13</b> <code>FUNCTIONS</code></a></li>
<li class="chapter" data-level="4.14" data-path="model-object.html"><a href="model-object.html#population_parameters"><i class="fa fa-check"></i><b>4.14</b> <code>POPULATION_PARAMETERS</code></a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="task-properties-object.html"><a href="task-properties-object.html"><i class="fa fa-check"></i><b>5</b> Task Properties Object</a><ul>
<li class="chapter" data-level="5.1" data-path="task-properties-object.html"><a href="task-properties-object.html#intended-use-of-task-properties"><i class="fa fa-check"></i><b>5.1</b> Intended use of Task Properties</a></li>
<li class="chapter" data-level="5.2" data-path="task-properties-object.html"><a href="task-properties-object.html#why-use-task-properties-for-settings-and-options-rather-than-arguments-of-functions-in-the-ddmore-r-package"><i class="fa fa-check"></i><b>5.2</b> Why use Task Properties for settings and options rather than arguments of functions in the ddmore R package?</a></li>
<li class="chapter" data-level="5.3" data-path="task-properties-object.html"><a href="task-properties-object.html#how-are-task-properties-used-by-mdl-and-pharmml"><i class="fa fa-check"></i><b>5.3</b> How are Task Properties used by MDL and PharmML?</a></li>
<li class="chapter" data-level="5.4" data-path="task-properties-object.html"><a href="task-properties-object.html#estimate"><i class="fa fa-check"></i><b>5.4</b> <code>ESTIMATE</code></a><ul>
<li class="chapter" data-level="5.4.1" data-path="task-properties-object.html"><a href="task-properties-object.html#target_settings"><i class="fa fa-check"></i><b>5.4.1</b> <code>TARGET_SETTINGS</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="prior-object.html"><a href="prior-object.html"><i class="fa fa-check"></i><b>6</b> Prior Object</a><ul>
<li class="chapter" data-level="6.1" data-path="prior-object.html"><a href="prior-object.html#prior-distributions-vs-initial-values-vs-fixed-values"><i class="fa fa-check"></i><b>6.1</b> Prior distributions vs initial values vs fixed values</a></li>
<li class="chapter" data-level="6.2" data-path="prior-object.html"><a href="prior-object.html#prior_parameters-block"><i class="fa fa-check"></i><b>6.2</b> <code>PRIOR_PARAMETERS</code> Block</a></li>
<li class="chapter" data-level="6.3" data-path="prior-object.html"><a href="prior-object.html#prior_variable_definition"><i class="fa fa-check"></i><b>6.3</b> <code>PRIOR_VARIABLE_DEFINITION</code></a><ul>
<li class="chapter" data-level="6.3.1" data-path="prior-object.html"><a href="prior-object.html#parametric-distributions-as-priors"><i class="fa fa-check"></i><b>6.3.1</b> Parametric distributions as priors</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="prior-object.html"><a href="prior-object.html#non-parametric-and-empirical-distributions-as-priors-inline-data."><i class="fa fa-check"></i><b>6.4</b> Non-parametric and empirical distributions as priors – inline data.</a><ul>
<li class="chapter" data-level="6.4.1" data-path="prior-object.html"><a href="prior-object.html#non-parametric-distribution-specification-with-inline-data."><i class="fa fa-check"></i><b>6.4.1</b> Non-parametric distribution specification with inline data.</a></li>
<li class="chapter" data-level="6.4.2" data-path="prior-object.html"><a href="prior-object.html#empirical-distribution-specification-with-inline-data."><i class="fa fa-check"></i><b>6.4.2</b> Empirical distribution specification with inline data.</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="prior-object.html"><a href="prior-object.html#non_canonical_distribution"><i class="fa fa-check"></i><b>6.5</b> <code>NON_CANONICAL_DISTRIBUTION</code></a><ul>
<li class="chapter" data-level="6.5.1" data-path="prior-object.html"><a href="prior-object.html#prior_source"><i class="fa fa-check"></i><b>6.5.1</b> <code>PRIOR_SOURCE</code></a></li>
<li class="chapter" data-level="6.5.2" data-path="prior-object.html"><a href="prior-object.html#input_prior_data"><i class="fa fa-check"></i><b>6.5.2</b> <code>INPUT_PRIOR_DATA</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="design-object.html"><a href="design-object.html"><i class="fa fa-check"></i><b>7</b> Design Object</a><ul>
<li class="chapter" data-level="7.1" data-path="design-object.html"><a href="design-object.html#design-object-overview"><i class="fa fa-check"></i><b>7.1</b> Design Object overview</a></li>
<li class="chapter" data-level="7.2" data-path="design-object.html"><a href="design-object.html#intervention"><i class="fa fa-check"></i><b>7.2</b> <code>INTERVENTION</code></a></li>
<li class="chapter" data-level="7.3" data-path="design-object.html"><a href="design-object.html#sampling"><i class="fa fa-check"></i><b>7.3</b> <code>SAMPLING</code></a></li>
<li class="chapter" data-level="7.4" data-path="design-object.html"><a href="design-object.html#population"><i class="fa fa-check"></i><b>7.4</b> <code>POPULATION</code></a></li>
<li class="chapter" data-level="7.5" data-path="design-object.html"><a href="design-object.html#study_design"><i class="fa fa-check"></i><b>7.5</b> <code>STUDY_DESIGN</code></a></li>
<li class="chapter" data-level="7.6" data-path="design-object.html"><a href="design-object.html#design_spaces"><i class="fa fa-check"></i><b>7.6</b> <code>DESIGN_SPACES</code></a></li>
<li class="chapter" data-level="7.7" data-path="design-object.html"><a href="design-object.html#design_parameters"><i class="fa fa-check"></i><b>7.7</b> <code>DESIGN_PARAMETERS</code></a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="mog-object.html"><a href="mog-object.html"><i class="fa fa-check"></i><b>8</b> MOG Object</a><ul>
<li class="chapter" data-level="8.1" data-path="mog-object.html"><a href="mog-object.html#info"><i class="fa fa-check"></i><b>8.1</b> <code>INFO</code></a></li>
<li class="chapter" data-level="8.2" data-path="mog-object.html"><a href="mog-object.html#objects"><i class="fa fa-check"></i><b>8.2</b> <code>OBJECTS</code></a></li>
<li class="chapter" data-level="8.3" data-path="mog-object.html"><a href="mog-object.html#mapping-of-variable-names-between-mdl-objects"><i class="fa fa-check"></i><b>8.3</b> Mapping of variable names between MDL Objects</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="mdl-language-reference.html"><a href="mdl-language-reference.html"><i class="fa fa-check"></i><b>9</b> MDL Language Reference</a><ul>
<li class="chapter" data-level="9.1" data-path="mdl-language-reference.html"><a href="mdl-language-reference.html#core-syntactic-elements"><i class="fa fa-check"></i><b>9.1</b> Core syntactic elements</a><ul>
<li class="chapter" data-level="9.1.1" data-path="mdl-language-reference.html"><a href="mdl-language-reference.html#keywords"><i class="fa fa-check"></i><b>9.1.1</b> Keywords</a></li>
<li class="chapter" data-level="9.1.2" data-path="mdl-language-reference.html"><a href="mdl-language-reference.html#variable-names"><i class="fa fa-check"></i><b>9.1.2</b> Variable names</a></li>
<li class="chapter" data-level="9.1.3" data-path="mdl-language-reference.html"><a href="mdl-language-reference.html#literals"><i class="fa fa-check"></i><b>9.1.3</b> Literals</a></li>
<li class="chapter" data-level="9.1.4" data-path="mdl-language-reference.html"><a href="mdl-language-reference.html#expressions"><i class="fa fa-check"></i><b>9.1.4</b> Expressions</a></li>
<li class="chapter" data-level="9.1.5" data-path="mdl-language-reference.html"><a href="mdl-language-reference.html#attributes-arguments-properties-and-values"><i class="fa fa-check"></i><b>9.1.5</b> Attributes, Arguments, Properties and Values</a></li>
<li class="chapter" data-level="9.1.6" data-path="mdl-language-reference.html"><a href="mdl-language-reference.html#statements"><i class="fa fa-check"></i><b>9.1.6</b> Statements</a></li>
<li class="chapter" data-level="9.1.7" data-path="mdl-language-reference.html"><a href="mdl-language-reference.html#random-variable-definitions"><i class="fa fa-check"></i><b>9.1.7</b> Random variable definitions</a></li>
<li class="chapter" data-level="9.1.8" data-path="mdl-language-reference.html"><a href="mdl-language-reference.html#blocks"><i class="fa fa-check"></i><b>9.1.8</b> Blocks</a></li>
<li class="chapter" data-level="9.1.9" data-path="mdl-language-reference.html"><a href="mdl-language-reference.html#objects-1"><i class="fa fa-check"></i><b>9.1.9</b> Objects</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="mdl-language-reference.html"><a href="mdl-language-reference.html#the-type-system"><i class="fa fa-check"></i><b>9.2</b> The Type System</a><ul>
<li class="chapter" data-level="9.2.1" data-path="mdl-language-reference.html"><a href="mdl-language-reference.html#the-types"><i class="fa fa-check"></i><b>9.2.1</b> The types</a></li>
<li class="chapter" data-level="9.2.2" data-path="mdl-language-reference.html"><a href="mdl-language-reference.html#the-default-type"><i class="fa fa-check"></i><b>9.2.2</b> The default type</a></li>
<li class="chapter" data-level="9.2.3" data-path="mdl-language-reference.html"><a href="mdl-language-reference.html#type-promotion"><i class="fa fa-check"></i><b>9.2.3</b> Type promotion</a></li>
<li class="chapter" data-level="9.2.4" data-path="mdl-language-reference.html"><a href="mdl-language-reference.html#typing-of-more-complex-types"><i class="fa fa-check"></i><b>9.2.4</b> Typing of more complex types</a></li>
<li class="chapter" data-level="9.2.5" data-path="mdl-language-reference.html"><a href="mdl-language-reference.html#type-inference-rules-for-symbols"><i class="fa fa-check"></i><b>9.2.5</b> Type inference rules for Symbols</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="mdl-language-reference.html"><a href="mdl-language-reference.html#scoping-and-statement-ordering"><i class="fa fa-check"></i><b>9.3</b> Scoping and statement ordering</a></li>
<li class="chapter" data-level="9.4" data-path="mdl-language-reference.html"><a href="mdl-language-reference.html#mdl-reference-guide"><i class="fa fa-check"></i><b>9.4</b> MDL Reference Guide</a><ul>
<li class="chapter" data-level="9.4.1" data-path="mdl-language-reference.html"><a href="mdl-language-reference.html#how-to-read-the-mdl-reference-guide."><i class="fa fa-check"></i><b>9.4.1</b> How to read the MDL Reference Guide.</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="mdl-language-reference.html"><a href="mdl-language-reference.html#objects-2"><i class="fa fa-check"></i><b>9.5</b> Objects</a></li>
<li class="chapter" data-level="9.6" data-path="mdl-language-reference.html"><a href="mdl-language-reference.html#blocks-1"><i class="fa fa-check"></i><b>9.6</b> Blocks</a><ul>
<li class="chapter" data-level="9.6.1" data-path="mdl-language-reference.html"><a href="mdl-language-reference.html#functions-2"><i class="fa fa-check"></i><b>9.6.1</b> Functions</a></li>
<li class="chapter" data-level="9.6.2" data-path="mdl-language-reference.html"><a href="mdl-language-reference.html#distributions"><i class="fa fa-check"></i><b>9.6.2</b> Distributions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="interoperability-guide.html"><a href="interoperability-guide.html"><i class="fa fa-check"></i><b>10</b> Interoperability Guide</a><ul>
<li class="chapter" data-level="10.1" data-path="interoperability-guide.html"><a href="interoperability-guide.html#on-interoperability-2"><i class="fa fa-check"></i><b>10.1</b> On interoperability</a></li>
<li class="chapter" data-level="10.2" data-path="interoperability-guide.html"><a href="interoperability-guide.html#dataset-conventions"><i class="fa fa-check"></i><b>10.2</b> Dataset conventions</a></li>
<li class="chapter" data-level="10.3" data-path="interoperability-guide.html"><a href="interoperability-guide.html#multiple-uses-of-dataset-columns"><i class="fa fa-check"></i><b>10.3</b> Multiple uses of dataset columns</a></li>
<li class="chapter" data-level="10.4" data-path="interoperability-guide.html"><a href="interoperability-guide.html#defining-constants-in-the-model"><i class="fa fa-check"></i><b>10.4</b> Defining constants in the model</a></li>
<li class="chapter" data-level="10.5" data-path="interoperability-guide.html"><a href="interoperability-guide.html#interoperability-in-the-model_prediction-block"><i class="fa fa-check"></i><b>10.5</b> Interoperability in the MODEL_PREDICTION block</a></li>
<li class="chapter" data-level="10.6" data-path="interoperability-guide.html"><a href="interoperability-guide.html#interoperability-in-the-observation-block"><i class="fa fa-check"></i><b>10.6</b> ## Interoperability in the OBSERVATION block</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="changelog.html"><a href="changelog.html"><i class="fa fa-check"></i><b>11</b> Changelog</a><ul>
<li class="chapter" data-level="11.1" data-path="changelog.html"><a href="changelog.html#v1.0---19-august-2016"><i class="fa fa-check"></i><b>11.1</b> v1.0 - 19 August 2016</a><ul>
<li class="chapter" data-level="11.1.1" data-path="changelog.html"><a href="changelog.html#scope"><i class="fa fa-check"></i><b>11.1.1</b> Scope</a></li>
<li class="chapter" data-level="11.1.2" data-path="changelog.html"><a href="changelog.html#changes"><i class="fa fa-check"></i><b>11.1.2</b> CHANGES</a></li>
<li class="chapter" data-level="11.1.3" data-path="changelog.html"><a href="changelog.html#additional-features-in-the-new-version"><i class="fa fa-check"></i><b>11.1.3</b> Additional features in the new version:</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="changelog.html"><a href="changelog.html#v0.7---11-december-2015"><i class="fa fa-check"></i><b>11.2</b> v0.7 - 11 December 2015</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="model-object" class="section level1">
<h1><span class="header-section-number">4</span> Model Object</h1>
<p>The Model Object within the MDL is intended to describe the mathematical and statistical properties of the model. MDL defines language elements that allow the user to code a wide variety of models and in a variety of ways. The Model Object is intended to specify the model independent of the target software which will be used for the task (estimation or simulation). The same model should be able to be used for a variety of tasks – estimation, simulation or optimal design without recoding. The Model Object should also be independent of the data – where possible we use enumerated types for categorical covariates and outcomes so that definition of the model is clear to any user regardless of the data used in a given task.</p>
<p>It should be noted however that MDL does not guide the user about whether the model that is defined is suitable for a given purpose or for any target software. The user is free to define any model, however they must also be aware that the specified model may not be useable with all target software.</p>
<p>As stated in the Introduction, the Model Object is intended to convey the mathematical and statistical definitions required to completely define the model. MDL used in defining the model is intended more as a descriptive language rather than a programmatic one. The Model Object is used in tasks by combining it with Data, Parameter and Task Properties objects, and defining tasks within the R script.</p>
<p>Currently defined blocks are <a href="model-object.html#idv"><code>IDV</code></a>, <a href="model-object.html#covariates"><code>COVARIATES</code></a>, <a href="model-object.html#population_parameters"><code>POPULATION_PARAMETERS</code></a>, <a href="model-object.html#functions"><code>FUNCTIONS</code></a>, <a href="model-object.html#variability_levels"><code>VARIABILITY_LEVELS</code></a>, <a href="model-object.html#structural_parameters"><code>STRUCTURAL_PARAMETERS</code></a>, <a href="model-object.html#variability_parameters"><code>VARIABILITY_PARAMETERS</code></a>, <a href="model-object.html#group_variables"><code>GROUP_VARIABLES</code></a>, <a href="model-object.html#random_variable_definition"><code>RANDOM_VARIABLE_DEFINITION</code></a>, <a href="model-object.html#individual_variables"><code>INDIVIDUAL_VARIABLES</code></a> , <a href="model-object.html#model_prediction"><code>MODEL_PREDICTION</code></a>, <a href="model-object.html#deq"><code>DEQ</code></a>, <a href="model-object.html#compartment"><code>COMPARTMENT</code></a>, <a href="model-object.html#observation"><code>OBSERVATION</code></a>.</p>
<p>Which blocks within the Model Object are used for a particular model depends on the structure of that model. Blocks should not be left empty (although this is not a syntax error). It is good practice to structure and write the model to facilitate readability and understanding of the model. Simple statements that are clear and unambiguous are preferred to statements combining many actions into one line of code. Use of the <a href="model-object.html#model_prediction"><code>MODEL_PREDICTION</code></a> block is encouraged to make it clear what the final prediction is from the model prior to use in generation of the observation level.</p>
<p>In the current version of MDL, the variable names and parameter names in the <a href="model-object.html#structural_parameters"><code>STRUCTURAL_PARAMETERS</code></a> and <a href="model-object.html#variability_parameters"><code>VARIABILITY_PARAMETERS</code></a> blocks of the Model Object must be matched to those in the Data and Parameter objects. The MOG Object brings together the Data, Parameter, Model and Task Properties Objects to perform tasks, and at this stage it is assumed that the variable names match across objects.</p>
<p>The independence of the Data Object from the model means that the data referenced by the Data Object may be easily used with a different model without modification of the Data Object. Similarly, the independence of the Parameter Object from the model means that all the parameters related to modelling project e.g. describing a particular drug, may be stored in one place. Note that parameters defined in the Parameter Object must have unique names.</p>
<p>Unlike other MDL Objects, the Model Object does not use a <a href="data-object.html#declared_variables"><code>DECLARED_VARIABLES</code></a> block. Instead variables are declared when they are used within the <a href="model-object.html#idv"><code>IDV</code></a>, <a href="model-object.html#covariates"><code>COVARIATES</code></a>, <a href="model-object.html#structural_parameters"><code>STRUCTURAL_PARAMETERS</code></a>, <a href="model-object.html#variability_parameters"><code>VARIABILITY_PARAMETERS</code></a> blocks. Particular care may be required for models defined using analytic equations (rather than via differential equations, compartments). In these models it may be necessary to declare inputs such as DOSE within the <a href="model-object.html#model_prediction"><code>MODEL_PREDICTION</code></a> block.</p>
<div id="on-interoperability-1" class="section level2">
<h2><span class="header-section-number">4.1</span> On interoperability</h2>
<p>The primary focus of MDL in this release is translation to valid PharmML, rather than conversion to target software. The previous Public Release was primarily concerned with demonstrating interoperability across key software targets. In this version of MDL there may be features supported which are not supported by certain target software, but which are valid for model description and which generate valid PharmML. The aim is to widen the scope of models which can be encoded in MDL and generate PharmML, since the latter is required for uploading models to the DDMoRe repository. Translation of these models to target software will follow with updates to the interoperability framework converters.</p>
<p>The MDL-IDE should assist the user in ensuring that the models encoded are valid MDL (and as a consequence, also valid PharmML).</p>
<p>Models in MDL may be expressed in a number of ways, which may be influenced by a number of factors including which languages the user is familiar with for encoding models. Flexibility allows the user to encode models quickly in a common language (MDL) which can then be shared with others and mutually understood. This flexibility also facilitates encoding in a given target when that language construct does not have a parallel in other tools. <strong>However</strong>, we <strong>STRONGLY</strong> encourage the user to encode the majority of models in a way that will facilitate interoperability. Interoperability allows the user of the model to choose the best tool for the job, or at least the tools that they have available to them.</p>
<p>If the user follows certain conventions for coding then it will increase the chance that a given model is interoperable between target tools. These conventions will be highlighted in the subsequent sections, but users should pay particular attention to sections 4.7, 4.9 and 4.10 on definition of <a href="model-object.html#group_variables"><code>GROUP_VARIABLES</code></a> defining fixed effects, <a href="model-object.html#individual_variables"><code>INDIVIDUAL_VARIABLES</code></a> defining the relationship between covariates (or <a href="model-object.html#group_variables"><code>GROUP_VARIABLES</code></a> defined variables) and random effects and <a href="model-object.html#model_prediction"><code>MODEL_PREDICTION</code></a> using these parameters to calculate predictions for given inputs.</p>
</div>
<div id="idv" class="section level2">
<h2><span class="header-section-number">4.2</span> <code>IDV</code></h2>
<p>The <a href="model-object.html#idv"><code>IDV</code></a> block defines the independent variable within the model. Typically this is TIME (or T for differential equations). An <a href="model-object.html#idv"><code>IDV</code></a> block must be present in the Model Object.</p>
<p>The syntax is a simple variable declaration:</p>
<pre><code>IDV{ &lt;Independent variable name&gt; }</code></pre>
</div>
<div id="covariates" class="section level2">
<h2><span class="header-section-number">4.3</span> <code>COVARIATES</code></h2>
<p>The <a href="model-object.html#covariates"><code>COVARIATES</code></a> block declares and defines covariates to be used in the <code>GROUP_VARIABLES,</code> <a href="model-object.html#individual_variables"><code>INDIVIDUAL_VARIABLES</code></a> and <a href="model-object.html#model_prediction"><code>MODEL_PREDICTION</code></a> blocks (see discussion of regressors below for use of covariates in the <a href="model-object.html#model_prediction"><code>MODEL_PREDICTION</code></a> block). Covariates listed in the <a href="model-object.html#covariates"><code>COVARIATES</code></a> block must be specified as <code>use is covariate</code> or <code>use is catCov</code> in the <code>DATA_INPUT_VARIABLES</code> block in the Data Object or defined in the <a href="design-object.html#population"><code>POPULATION</code></a> block of the Design Object. Covariate transformations may be specified within this block.</p>
<pre><code>COVARIATES{
&lt; Covariate name &gt;
&lt; Categorical covariate name &gt; withCategories {&lt; category1 &gt;, &lt; category2 &gt;, … , &lt; category_k &gt;}
&lt; Covariate name &gt; = &lt;simple transformation equation&gt;
}</code></pre>
<p>For categorical covariates, the categories defined in the <a href="model-object.html#covariates"><code>COVARIATES</code></a> block must match those specified for <code>DATA_INPUT_VARIABLES</code> with <code>use is catCov</code> – see the definition of the SEX covariate above.</p>
<p>An example <a href="model-object.html#covariates"><code>COVARIATES</code></a> block is shown below:</p>
<pre><code>COVARIATES{
  WT
  SEX withCategories {female, male}
  logtWT = ln(WT/70)
}</code></pre>
<p>In this example the withCategories prefix to the list of category names will be used to link to the values associated with these names in the Data Object.</p>
<p>The logtWT variable in the <a href="model-object.html#covariates"><code>COVARIATES</code></a> block may be used as the value for the cov attribute in the linear function in the <a href="model-object.html#individual_variables"><code>INDIVIDUAL_VARIABLES</code></a> block if <code>WT</code> follows the above rules for covariates.</p>
<p>Please also read about the specification of covariate models in sections 4.7 and 4.9.</p>
<p>The definition of covariates above assumes that the covariates are constant within individuals or vary only at occasion levels. It is also possible to define covariates that vary with the independent variable (typically time):</p>
<pre><code>COVARIATES(type is idvDependent){
  WT
  logtWT = ln(WT/70)
}</code></pre>
<p>Covariates which are defined as <code>idvDependent</code> should NOT be used in the <code>type is linear</code> definition of <code>INDIVIDUAL_PARAMETERS</code>.</p>
</div>
<div id="structural_parameters" class="section level2">
<h2><span class="header-section-number">4.4</span> <code>STRUCTURAL_PARAMETERS</code></h2>
<p>This block declares fixed effect parameters that define the structure of the model. There is no separator character in between variable names. The variable names do not need to be on separate lines, but it may be easier to read if they are presented in this way and it allows comments to be added to help communication</p>
<pre><code>STRUCTURAL_PARAMETERS{
  &lt; Variable name(s) of structural parameters &gt;
}</code></pre>
<p>For example:</p>
<pre><code>STRUCTURAL_PARAMETERS {
  POP_CL
  POP_V
  POP_KA
  POP_TLAG
  BETA_CL_WT
  BETA_V_WT
} # end STRUCTURAL_PARAMETERS</code></pre>
</div>
<div id="variability_parameters" class="section level2">
<h2><span class="header-section-number">4.5</span> <code>VARIABILITY_PARAMETERS</code></h2>
<p>Similar to the <a href="model-object.html#structural_parameters"><code>STRUCTURAL_PARAMETERS</code></a> block, this block declares all the variability (including covariance, correlation and residual error) parameters (population parameter variability and other variability level parameters) used in the model. The variable names do not need to be on separate lines, but it may be easier to read if they are presented in this way and allows comments to be added to help communication</p>
<pre><code>VARIABILITY_PARAMETERS{
&lt;Variable name(s) of variability parameters&gt;
}</code></pre>
<p>For example:</p>
<pre><code>VARIABILITY_PARAMETERS {
  PPV_CL
  PPV_V
  CORR_CL_V
  PPV_KA
  PPV_TLAG
  RUV_ADD
  RUV_PROP
} # end VARIABILITY_PARAMETERS</code></pre>
<div id="residual-unexplained-variability" class="section level3">
<h3><span class="header-section-number">4.5.1</span> Residual Unexplained Variability</h3>
<p>Residual variability is typically defined as a standard Normal distribution ~N(mean=0, var=1). The standard residual error models (see section 4.12.1) then define the parameters of that model e.g. additive and proportional which multiply the random N(0,1) variable. They can also define expressions involving parameters which define the residual error model. These parameters should be declared as <a href="model-object.html#variability_parameters"><code>VARIABILITY_PARAMETERS</code></a>.</p>
</div>
</div>
<div id="variability_levels" class="section level2">
<h2><span class="header-section-number">4.6</span> <code>VARIABILITY_LEVELS</code></h2>
<p>The <a href="model-object.html#variability_levels"><code>VARIABILITY_LEVELS</code></a> block defines the model hierarchy. Each variable should have attributes defining its <code>level</code> in the model hierarchy and variability <code>type</code> which is one of <code>parameter</code> or <code>observation</code>. <code>DATA_INPUT_VARIABLES</code> with <code>use is dv</code> and <code>use is id</code> are automatically identified as describing variability levels. Additional variables can be used to define variability levels by defining these as <code>use is varLevel</code> in <code>DATA_INPUT_VARIABLES</code>.</p>
<p>Typically, level = 1 is the level of each sample / experimental unit / observation. Additional levels of the hierarchy built on top of this. Typically in population models there is at least one additional level of variability – that of the individual (the experimental unit). Occasionally if modelling summary level data in a model-based meta-analysis, treatment arm may be used as the experimental unit and labelled in the <code>DATA_INPUT_VARIABLES</code> block as <code>use is id</code>.</p>
<p>The syntax is:</p>
<pre><code>  VARIABILITY_LEVELS(reference = &lt; ID | varLevel &gt;){
      &lt;Variable name&gt; : { level = &lt;number&gt;, type is &lt;parameter | observation&gt;}
      ... # Additional levels of variability specified as above
  }</code></pre>
<p>For example:</p>
<pre><code>VARIABILITY_LEVELS(reference=ID){
  ID : { level=2, type is parameter }
  DV : { level=1, type is observation }
  }</code></pre>
<p>If between occasion variability is required in the model then this should be specified here as a variability level between the observation and individual levels. In NONMEM occasion is typically specified as an additional layer of inter-individual variability which is defined conditionally on an occasion variable in the dataset. In MDL this is explicitly treated as a distinct level of variability.</p>
<pre><code>VARIABILITY_LEVELS(reference=ID){
 ID : { level=3, type is parameter }
 OCC : { level=2, type is parameter }
 DV : { level=1, type is observation }
 }</code></pre>
<p>Additional levels of variability are easily implemented by incrementing <code>level = &lt;number&gt;</code> with an associated DATA_INPUT_VARIABLE with <code>use is varLevel</code>. This facilitates definition of levels such as between trial random variability.</p>
<p>The distinction between <code>type is observation</code> and <code>type is parameter</code> will be used further in future versions of MDL to describe models where there are additional levels of hierarchy. For example, when describing differences between trials as a random effect or modelling population level differences; and at the observation level e.g. replicates of PD measurements at each time point, or multiple assays of a single sample. Specifying variability type allows extensibility for the future while retaining backwards compatibility.</p>
<p>When estimating model parameters using observed data, the <code>DATA_INPUT_VARIABLE</code> with <code>use is id</code> is the default “reference level of the model hierarchy <span class="citation">(Gelman <a href="#ref-Gelman2006">2006</a>)</span>. When using a Design Object, the reference level of the model hierarchy is likely to be implicit (subjects in a study arm) rather than explicit. Thus the need to specify <code>reference = ID</code>.</p>
</div>
<div id="group_variables" class="section level2">
<h2><span class="header-section-number">4.7</span> <code>GROUP_VARIABLES</code></h2>
<p>The <a href="model-object.html#group_variables"><code>GROUP_VARIABLES</code></a> block can be used to specify group specific variables using parameters and fixed effect relationships between parameters and covariates. The <a href="model-object.html#individual_variables"><code>INDIVIDUAL_VARIABLES</code></a> block can then use these values in definition of the individual parameters by incorporating the random between individual variabilities defined in the <a href="model-object.html#random_variable_definition"><code>RANDOM_VARIABLE_DEFINITION</code></a> block(s).</p>
<p>Using the <a href="model-object.html#group_variables"><code>GROUP_VARIABLES</code></a> block to define covariate relationships is not supported for parameter estimation in some target software since the equations defined in the <a href="model-object.html#group_variables"><code>GROUP_VARIABLES</code></a> block are user defined. The MDL-IDE is not equipped to determine whether the defined relationships conform to linear relationships (after transformation) that have been shown to allow interoperability between software.</p>
<p>For this reason we suggest that definition of covariate dependent <a href="model-object.html#group_variables"><code>GROUP_VARIABLES</code></a> is used only in cases where a reformulation to “linear or “linear after transformation relationships with covariates as defined in section 4.9 is not possible.</p>
<p>The <a href="model-object.html#group_variables"><code>GROUP_VARIABLES</code></a> block is essential for defining relationships between structural parameters and covariates which are non-linear, even after transformation. For example to describe clearance across both adults and children a maturation model may be required. For example:</p>
<pre><code>GROUP_VARIABLES{
  FSIZE = (WT/70)^0.75
  FAGE = if(AGE &gt;= 20) then exp(BETA_CL_AGE*(AGE-20))
         else 1
  FMAT = 1/(1+(PCA/TM50)^(-HILL))
  GRP_CL = POP_CL * FSIZE * FAGE * FMAT
}</code></pre>
<p>GRP_CL can then be used in the definition of individual variables within the <a href="model-object.html#individual_variables"><code>INDIVIDUAL_VARIABLES</code></a> block.</p>
<div id="defining-model-constants" class="section level3">
<h3><span class="header-section-number">4.7.1</span> Defining model constants</h3>
<p>Model constants (model variables with constant values) may be defined in MDL within the <a href="model-object.html#group_variables"><code>GROUP_VARIABLES</code></a> block.</p>
<p>However, to ensure interoperability within the current SEE, constant values in the model should be defined as <code>STUCTURAL_PARAMETERS</code> and fixed to a value in the Parameter Object.</p>
<p>For models expressed as systems of differential equations (<a href="model-object.html#deq"><code>DEQ</code></a> block), model variables can be set to constant values in the <a href="model-object.html#model_prediction"><code>MODEL_PREDICTION</code></a> block, but this may be computationally inefficient in the target software implementation.</p>
</div>
</div>
<div id="random_variable_definition" class="section level2">
<h2><span class="header-section-number">4.8</span> <code>RANDOM_VARIABLE_DEFINITION</code></h2>
<p>The <a href="model-object.html#random_variable_definition"><code>RANDOM_VARIABLE_DEFINITION</code></a> block defines the distribution of the random effects to be used in construction of mixed effects models. The <a href="model-object.html#random_variable_definition"><code>RANDOM_VARIABLE_DEFINITION</code></a> block defines random variables in terms of parametric distributions.</p>
<p>It is assumed that all variables within the same block are defined for the same level of the model hierarchy. Separate <a href="model-object.html#random_variable_definition"><code>RANDOM_VARIABLE_DEFINITION</code></a> blocks should be used for each layer of the model hierarchy.The user specifies which level through the <code>(level = &lt;name of variable associated with this level&gt; )</code> syntax following the <a href="model-object.html#random_variable_definition"><code>RANDOM_VARIABLE_DEFINITION</code></a> block name.</p>
<p>The following syntax is used to define random variables:</p>
<pre><code>RANDOM_VARIABLE_DEFINITION( level = &lt;VARIABILITY_LEVEL variable&gt; ){
  &lt;VARIABLE NAME &gt; ~ &lt;Distribution with arguments&gt;
 }</code></pre>
<p>The <a href="model-object.html#random_variable_definition"><code>RANDOM_VARIABLE_DEFINITION</code></a> block supports probability distributions as specified in the ProbOnto knowledge base <span class="citation">(M. J. Swat, Grenon, and Wimalaratne <a href="#ref-Swat_2016">2016</a>)</span>. Typically for definition of structural parameter and residual error random variability, Normal distributions will be used. The MDL distribution “Normal(…) maps to either ProbOnto Normal1 or Normal2 depending on the parameterisation:</p>
<table>
<thead>
<tr class="header">
<th><strong>MDL Name</strong></th>
<th><strong>Argument name</strong></th>
<th><strong>Argument Types</strong></th>
<th><strong>ProbOnto distribution</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Normal</td>
<td>mean</td>
<td>Real</td>
<td>Normal1</td>
</tr>
<tr class="even">
<td></td>
<td>sd</td>
<td>Real</td>
<td></td>
</tr>
<tr class="odd">
<td>Normal</td>
<td>mean</td>
<td>Real</td>
<td>Normal2</td>
</tr>
<tr class="even">
<td></td>
<td>var</td>
<td>Real</td>
<td></td>
</tr>
</tbody>
</table>
<p>This means that the user does not need to remember which ProbOnto distribution uses which parameterisation for this frequently used distribution.</p>
<p>An example of <code>RANDOM_VARIABLE_DEFINTION</code> for individual random effects is given below:</p>
<pre><code>RANDOM_VARIABLE_DEFINITION( level = ID ) {
  ETA_CL  ~ Normal(mean = 0, sd = PPV_CL)
  ETA_V   ~ Normal(mean = 0, sd = PPV_V)
  ETA_KA  ~ Normal(mean = 0, sd = PPV_KA)
  ETA_TLAG ~ Normal(mean = 0, sd = PPV_TLAG)
} # end RANDOM_VARIABLE_DEFINITION</code></pre>
<p>In the code above, <code>ETA_CL</code>, <code>ETA_V</code>, <code>ETA_KA</code> and <code>ETA_TLAG</code> vary with each new value of ID. These variables are normally distributed with mean = 0 and standard deviation defined by the variability parameters. The distribution can also be defined using variances.</p>
<p>In the example above, all random variability parameters are independent. To specify correlation or covariance between parameters, the user should specify either pairwise correlation or covariance between random variables or use a multivariate distribution. In contrast to the previous version of MDL where correlations and covariances were defined only in the Parameter Object, this version requires the user to specify correlations and covariances in the <a href="model-object.html#random_variable_definition"><code>RANDOM_VARIABLE_DEFINITION</code></a> block. This is to allow the Prior Object to define priors on parameters used in the Model Object.</p>
<p>The following syntax is used to define correlation or covariance:</p>
<pre><code>:: {type is &lt;correlation / covariance&gt;,
  rv1 = &lt;RANDOM_VARIABLE_DEFINITION variable&gt;,
  rv2 = &lt;RANDOM_VARIABLE_DEFINITION variable&gt;,
  variable = &lt;VARIABILITY_PARAMETERS parameter&gt; }</code></pre>
<p>Note the use of the “anonymous list using double colon “:: . This is used since we are assigning additional information to the variable defined in the <a href="model-object.html#variability_parameters"><code>VARIABILITY_PARAMETERS</code></a> block.</p>
<p>For example (UseCase1):</p>
<pre><code>:: {type is correlation, rv1=ETA_CL, rv2=ETA_V,
value=CORR_CL_V}</code></pre>
<p>Alternatively, the user can specify multivariate distribution(s) for parameters to specify the joint distribution of multiple random variability parameters. To do this, the user must specify the type of parameters in the <a href="model-object.html#structural_parameters"><code>STRUCTURAL_PARAMETERS</code></a> (if required) and <a href="model-object.html#variability_parameters"><code>VARIABILITY_PARAMETERS</code></a> blocks. Typically for multivariate distributions, there may be a vector of mean values, and a matrix of correlations or covariances. We can then use these to define the multivariate distribution using ProbOnto definitions.</p>
<p>So if we assume that the random effects for CL, V and KA (ETA_CL, ETA_V and ETA_KA in the univariate case) come from a multivariate distribution then the distribution of the vector ETA_CL_V_KA is given as:</p>
<p><span class="math display">\[ETA\_ CL\_ V_{\text{KA}} = \begin{bmatrix}
ETA\_ CL \\
ETA\_ V \\
ETA\_ KA \\
\end{bmatrix}\sim\ MultivariateNormal1\left( mean = \begin{bmatrix}
0 \\
0 \\
0 \\
\end{bmatrix},covariance = PPV\_ CL\_ V\_ KA \right)\]</span></p>
<p>where PPV_CL_V_KA is a covariance matrix defining the variances and covariances of the random effects:</p>
<p><span class="math display">\[PPV\_ CL\_ V\_ KA\  = \begin{pmatrix}
PPV\_ CL &amp; COV\_ CL\_ V &amp; COV\_ CL\_ KA \\
COV\_ CL\_ V &amp; PPV\_ V &amp; COV\_ V\_ KA \\
COV\_ CL\_ KA &amp; COV\_ V\_ KA &amp; PPV\_ KA \\
\end{pmatrix}\]</span></p>
<p>Note that the ProbOnto distribution MultivariateNormal1 uses mean and covariance, while MultivariateNormal2 uses mean and correlation.</p>
<p>For example (UseCase6_2):</p>
<pre><code>VARIABILITY_PARAMETERS {
PPV_CL_V_KA::matrix
PPV_TLAG
RUV_PROP
RUV_ADD
} # end VARIABILITY_PARAMETERS

RANDOM_VARIABLE_DEFINITION(level=ID) {
ETA_CL_V_KA ~ MultivariateNormal1(mean = [0,0,0],
covarianceMatrix = PPV_CL_V_KA)
ETA_TLAG ~ Normal(mean = 0, var = PPV_TLAG)
} # end RANDOM_VARIABLE_DEFINITION</code></pre>
<p>Similarly for the residual unexplained variability with mean 0 and a fixed variance of 1, we might have a <a href="model-object.html#random_variable_definition"><code>RANDOM_VARIABLE_DEFINITION</code></a> block as follows:</p>
<pre><code>RANDOM_VARIABLE_DEFINITION(level=DV){
EPS_Y ~ Normal(mean = 0, var = 1)
}</code></pre>
<p>To define between occasion variability we might have a <a href="model-object.html#random_variable_definition"><code>RANDOM_VARIABLE_DEFINITION</code></a> block as follows:</p>
<pre><code>RANDOM_VARIABLE_DEFINITION(level=OCC){
  eta_BOV_CL  ~ Normal(mean=0, var=BOV_CL)
  eta_BOV_V   ~ Normal(mean=0, var=BOV_V)
  eta_BOV_KA  ~ Normal(mean=0, var=BOV_KA)
  eta_BOV_TLAG ~ Normal(mean=0, var=BOV_TLAG)
 }# end RANDOM_VARIABLE_DEFINITION</code></pre>
<p>Note that in the above example blocks, ID, DV and OCC are declared as valid identifiers for the variability hierarchy through the <a href="model-object.html#variability_levels"><code>VARIABILITY_LEVELS</code></a> block assuming appropriate specification within the Data Object of <code>DATA_INPUT_VARIABLES</code> with <code>use is id</code>, <code>use is varLevel</code> and <code>use is dv</code> for ID, OCC and DV (respectively).</p>
<pre><code>VARIABILITY_LEVELS{
  ID : { level=3, type is parameter }
  OCC : { level=2, type is parameter }
  DV : { level=1, type is observation }
  }</code></pre>
<p>The <a href="model-object.html#random_variable_definition"><code>RANDOM_VARIABLE_DEFINITION</code></a> block can also be used to explicitly define the distribution of individual variables, however if this method is used, then an anonymous list must be specified in the <code>INDVIDUAL_VARIABLES</code> block to refer to random variable defined in this way. Parameters defined in this way cannot be used with <code>type is linear</code> or <code>type is general</code> in the <a href="model-object.html#individual_variables"><code>INDIVIDUAL_VARIABLES</code></a> block.</p>
<p>For example:</p>
<pre><code>RANDOM_VARIABLE_DEFINITION(level=ID) {
  CL ~ LogNormal3(median = POP_CL, stdevLog = SD_LNCL)
  …
  }

INDIVIDUAL_VARIABLES{
  :: {type is rv, variable=CL}
  …
  }</code></pre>
<p>Covariates can be included via definition in the <a href="model-object.html#group_variables"><code>GROUP_VARIABLES</code></a> block, but this may limit interoperability and translation of the model to target software.</p>
<p>For example:</p>
<p>(See <a href="model-object.html#group_variables"><code>GROUP_VARIABLES</code></a> block example above for definition of GRP_CL)</p>
<pre><code>RANDOM_VARIABLE_DEFINITION(level=ID) {
  CL ~ LogNormal3(median = GRP_CL, stdevLog = SD_LNCL)
  …
  }</code></pre>
<p>The <a href="model-object.html#random_variable_definition"><code>RANDOM_VARIABLE_DEFINITION</code></a> block is also used to specify non-continuous outcome variables i.e. count, binary, categorical. See section 4.12.2.</p>
</div>
<div id="individual_variables" class="section level2">
<h2><span class="header-section-number">4.9</span> <code>INDIVIDUAL_VARIABLES</code></h2>
<p>The <a href="model-object.html#individual_variables"><code>INDIVIDUAL_VARIABLES</code></a> block is used to express how the fixed effect variables (population parameters, covariates with their associated fixed effect parameters) and random effects (defined in the <a href="model-object.html#random_variable_definition"><code>RANDOM_VARIABLE_DEFINITION</code></a> block) combine to define the individual variables which will be used in the <a href="model-object.html#model_prediction"><code>MODEL_PREDICTION</code></a> block to calculate predictions for given inputs. If this is not a population model or if variables are completely defined through the <a href="model-object.html#group_variables"><code>GROUP_VARIABLES</code></a> block then this block is not required. However, that might break interoperability with some tools like Monolix, which require the definition of individual parameters</p>
<p>There are three principle ways of defining <a href="model-object.html#individual_variables"><code>INDIVIDUAL_VARIABLES</code></a> and these will be described below.</p>
<p>The only way of defining <a href="model-object.html#individual_variables"><code>INDIVIDUAL_VARIABLES</code></a> that is currently supported for parameter estimation across target software is the “linear after transformation method described in section 4.9.1 below.</p>
<div id="mixed-effect-model-with-linear-fixed-effects-and-normally-distributed" class="section level3">
<h3><span class="header-section-number">4.9.1</span> Mixed effect model with linear fixed effects and normally distributed</h3>
<p>random effects</p>
<p>In some cases it is possible to express the fixed effects of covariates for a population parameter as a linear model with normally distributed random effects, sometimes employing a simple transformation (log, logit etc.) to achieve this.</p>
<p>We refer to this as a linear covariate model and this equates to the following mathematical definition:</p>
<p><span class="math display">\[{h(\psi}_{i}) = h\left( \left. \ \psi_{\mathrm{\text{pop}}} \right.\  \right) + \ \beta C_{i} + \eta_{i}\]</span></p>
<p><span class="math inline">\(\psi_{i}\)</span> – Individual parameter</p>
<p><span class="math inline">\(\psi_{\mathrm{\text{pop}}}\)</span> – Typical or population mean parameter</p>
<p><span class="math inline">\(\beta\)</span> – Fixed effects</p>
<p><span class="math inline">\(C_{i}\)</span> – Covariates</p>
<p><span class="math inline">\(\eta_{i}\)</span> – Random effect</p>
<p>h – Transformation function – typically log, logit, probit etc.</p>
<p>The MDL syntax for this form of specification is:</p>
<pre><code> &lt;Individual parameter&gt;
 : {type is linear, trans is &lt;h&gt;,
 pop = &lt;Population STRUCTURAL parameter&gt;,
 fixEff = [ {coeff = &lt;Fixed Effect STRUCTURAL parameter for covariate&gt;,
 cov = &lt;Covariate in COVARIATES block conforming to rules below&gt;}
 ,
 … &lt;Additional coefficient and covariate pairs as above&gt; ],
 ranEff = [ RANDOM_VARIABLE_DEFINITION parameter(s) ] )</code></pre>
<p>The <code>fixEff</code> and <code>trans</code> arguments are optional.</p>
<p>Note that the syntax allows conditional assignment of list types to the parameter. So if the model for a parameter varies according to a covariate or variable value, then this can be reflected in the condition applied.</p>
<p>Note that left hand side transformations of the individual parameters are no longer allowed. The transformation specified in the <code>trans</code> argument applies to both the left hand side and right hand side of the equation. The ranEff argument expects a vector of random variables. If there is only one random variable the square brackets are not required.</p>
<p>For example (UseCase1):</p>
<pre><code>CL : {type is linear, trans is ln, pop = POP_CL,
 fixEff = [{coeff=BETA_CL_WT, cov=logtWT}] ,
 ranEff = ETA_CL }</code></pre>
<p>Using this construct for individual variables equates to the MU referencing approach in NONMEM and the standard definition of individual parameters in Monolix.</p>
<p>As discussed in the documentation of the Data Object defining covariates (section 3.3.5.1) certain constraints are placed on the type of covariate used in this form of specification. When covariates are defined within the Model Object <a href="model-object.html#covariates"><code>COVARIATES</code></a> block and used in the specification of <code>INDIVIDUAL_PARAMETERS</code> using the <code>linear( …, fixEff=[{coeff=&lt;coefficient&gt;, cov = &lt;covariate&gt;}] )</code> construct, they must have particular properties:</p>
<ul>
<li><p>They must be constant within an individual or constant within an occasion.</p></li>
<li><p>They will only be allowed simple transformations within the model e.g. centering on a median / mean and/or log transformation, logit transformation.</p></li>
<li><p>The transformation cannot depend on another covariate.</p></li>
<li><p>Statistical models (random effects) on covariates are not supported.</p></li>
</ul>
<p>If a categorical covariate is used, then the catCov argument in fixEff should refer to the appropriate category of the covariate. For example (UseCase5):</p>
<pre><code>CL : {type is linear, trans is ln,
  pop = POP_CL,
  fixEff = [
    {coeff = BETA_CL_WT, cov = logtWT},
    {coeff = POP_FCL_FEM, catCov = SEX.female },
    {coeff = BETA_CL_AGE, cov = tAGE}
    ],
  ranEff = ETA_CL }</code></pre>
<p>If the categorical covariate has more than k&gt;2 categories then the user needs to specify k-1 dichotomous “dummy covariates to specify the factor levels and appropriate contrasts (between level k and an appropriate comparison value). For example when adding GENOTYPE as a categorical covariate, the user may want to compare each category of GENOTYPE to a suitable reference value of the covariate. In this case all of the “dummy dichotomous comparison covariates should be included in the model in one step.</p>
<p>If between occasion variability is specified in a <a href="model-object.html#random_variable_definition"><code>RANDOM_VARIABLE_DEFINITION</code></a> block then the associated random effects can be specified in a vector form of the ranEff attribute. These will be added into the linear equation. For example (UseCase8):</p>
<pre><code>CL : {type is linear, trans is ln, pop = POP_CL,
      fixEff = [{coeff=BETA_CL_WT, cov=logtWT}] ,
      ranEff = [eta_BSV_CL, eta_BOV_CL ]}</code></pre>
</div>
<div id="general-mixed-effect-model-with-gaussian-random-effects." class="section level3">
<h3><span class="header-section-number">4.9.2</span> General mixed effect model with Gaussian random effects.</h3>
<p>The second formulation for the <code>INDVIDUAL_PARAMETERS</code> block uses variables defined in the <a href="model-object.html#group_variables"><code>GROUP_VARIABLES</code></a> block and assumes that the random effect is additive i.e. is Gaussian (Normally distributed) or Gaussian after transformation.</p>
<p>We refer to this as a “general or Gaussian after transformation model and the associated mathematical representation is:</p>
<p><span class="math display">\[{h(\psi}_{i}) = H\left( \beta,C_{i} \right) + \ \eta_{i}\]</span></p>
<p><span class="math inline">\(\psi_{i}\)</span> – Individual parameter</p>
<p><span class="math inline">\(\psi_{\mathrm{\text{pop}}}\)</span> – Typical or population mean parameter</p>
<p><span class="math inline">\(\beta\)</span> – Fixed effects</p>
<p><span class="math inline">\(C_{i}\)</span> – Covariates</p>
<p><span class="math inline">\(\eta_{i}\)</span> – Random effect</p>
<p>H – Arbitrary function</p>
<p>h – Transformation function – log, logit, probit.</p>
<p>Where <span class="math inline">\(H\left( \beta,C_{i} \right)\)</span> is defined in the <a href="model-object.html#group_variables"><code>GROUP_VARIABLES</code></a> block.</p>
<p>The MDL syntax for this form of specification is:</p>
<pre><code>&lt;Individual parameter&gt; : {type is general,
                          grp = &lt;GROUP_VARIABLES defined variable &gt;,
                          trans is &lt;ln / logit / probit&gt;,
                          ranEff = [ RANDOM_VARIABLE_DEFINITION parameter(s) ] )</code></pre>
<p>The trans argument is optional.</p>
<p>If the trans argument is used, then it is assumed that appropriate transformations have been made in the <a href="model-object.html#group_variables"><code>GROUP_VARIABLES</code></a> block or in the assigned value for the grp attribute to ensure that the fixed effect and random effect are additive and on the correct scale given the transformation.</p>
<p>For example, for the GROUP_VARIABLES defined in section 4.7 above:</p>
<pre><code>CL : {type is general, grp = ln(GRP_CL),
      trans is ln,
      ranEff = ETA_CL)</code></pre>
<p>This corresponds to the following equation for CL:</p>
<p><span class="math inline">\(\ln\left( \text{CL} \right) = \ln\left( \text{GR}P_{\text{CL}} \right) + ETA_{\text{CL}}\)</span></p>
<p>which, after back-transformation is equivalent to:</p>
<p><span class="math inline">\(CL = GRP_{\text{CL}}*exp(ETA_{\text{CL}}\)</span>)</p>
</div>
<div id="mixed-effect-model-defined-by-equations" class="section level3">
<h3><span class="header-section-number">4.9.3</span> Mixed effect model defined by equations</h3>
<p>The individual variables can also be defined using expressions by combining parameters with variables defined in <a href="model-object.html#group_variables"><code>GROUP_VARIABLES</code></a> and random effects .</p>
<p>For example:</p>
<p><code>CL = POP_CL * exp(ETA_CL)</code></p>
<p>Or (using a variable GRP_CL defined in the <a href="model-object.html#group_variables"><code>GROUP_VARIABLES</code></a> block as defined above)</p>
<p><code>CL = GRP_CL * exp(ETA_CL)</code></p>
<p>It is also possible to define fixed and random effect expressions as follows:</p>
<p><code>CL=POP_CL * (WT/70)^0.75 * exp(eta_PPV_CL)</code></p>
<p>Which can be log transformed into a linear form of mixed effect model like this:</p>
<p><code>CL=exp(ln(POP_CL)+ 0.75 * ln(WT/70) + eta_PPV_CL)</code></p>
<p>However, note that while it is possible for the user to “see that the equation above is linear in the fixed and random effects, it is not possible for the MDL-IDE to determine this. To specify linear models we must explicitly do so using the <code>{type is linear, … }</code> construct described in section 4.9.1.</p>
</div>
<div id="individual_variables-without-inter-individual-variability" class="section level3">
<h3><span class="header-section-number">4.9.4</span> INDIVIDUAL_VARIABLES without inter-individual variability</h3>
<p>For interoperability reasons, parameters defined in the <a href="model-object.html#structural_parameters"><code>STRUCTURAL_PARAMETERS</code></a> block without associated variability i.e. where the individual value is the same as the parameter value, should be defined within the <a href="model-object.html#individual_variables"><code>INDIVIDUAL_VARIABLES</code></a> block. If the model parameter is constrained to be positive, then an appropriate transformation should be used to ensure a positive value.</p>
</div>
<div id="individual_variables-where-the-variable-is-defined-in-the" class="section level3">
<h3><span class="header-section-number">4.9.5</span> <a href="model-object.html#individual_variables"><code>INDIVIDUAL_VARIABLES</code></a> where the variable is defined in the</h3>
<p><a href="model-object.html#random_variable_definition"><code>RANDOM_VARIABLE_DEFINITION</code></a> block.</p>
<p>As discussed in section 0 above, if the individual variable is defined completely via a distribution in the <a href="model-object.html#random_variable_definition"><code>RANDOM_VARIABLE_DEFINITION</code></a> block, then an anonymous list must be used to declare the variable within the <a href="model-object.html#individual_variables"><code>INDIVIDUAL_VARIABLES</code></a> block.</p>
<p>The syntax for the anonymous list is:</p>
<pre><code>:: {type is rv, variable = &lt;RANDOM_VARIABLE_DEFINITION
variable&gt;}</code></pre>
</div>
<div id="conditional-assignment-of-individual_variables" class="section level3">
<h3><span class="header-section-number">4.9.6</span> Conditional assignment of <a href="model-object.html#individual_variables"><code>INDIVIDUAL_VARIABLES</code></a></h3>
<p>It is possible to apply conditional handling to the assignment of <a href="model-object.html#individual_variables"><code>INDIVIDUAL_VARIABLES</code></a>. Note that the conditioning occurs on the RIGHT HAND SIDE of the expression ONLY. The conditioning statement should follow the conventions described in section 9.1.4.4.</p>
<p>The syntax is as follows:</p>
<pre><code>&lt;Individual variable&gt;
  : if(condition1) then { INDIVIDUAL_VARIABLE list 1 }
    elseif(condition2) then { INDIVIDUAL_VARIABLE list 2 }
    else { INDIVIDUAL_VARIABLE list 3 }</code></pre>
<p>Note the use of an “else statement to ensure that <Individual
parameter> is always assigned a value.</p>
<p>For example:</p>
<pre><code>CL : if(RF==RF.normal) {type is linear, trans is ln,
                        pop = POP_CL, fixEff = {coeff = BETA_CL_WT, cov = logtWT},
                        ranEff = ETA_CL }
                        
      else {type is general, trans is ln, 
            grp = ln(GRP_CL), 
            ranEff = ETA_CL }</code></pre>
<p>In the above, the expression for individual Clearance is conditional on whether the subject’s renal function (RF) is “normal or not. The user would need to have defined a suitable model for GRP_CL in the <a href="model-object.html#group_variables"><code>GROUP_VARIABLES</code></a> block. (RF is a categorical data variable that has a symbolic value of “normal and other categories which are not used in this example).</p>
<p>Please also see sections 9.1.4.4 and 9.1.4.5 for further information on handling of conditional statements.</p>
</div>
<div id="individual_variables-definitions-in-practice." class="section level3">
<h3><span class="header-section-number">4.9.7</span> <a href="model-object.html#individual_variables"><code>INDIVIDUAL_VARIABLES</code></a> definitions in practice.</h3>
<p>As has been discussed above, to facilitate interoperability we strongly suggest that users try to formulate their models using the {type is linear, … } form shown in section 4.9.1 with the caveat included about the forms of covariate relationships that can be used within this construct.</p>
<p>In some cases, users may have to consider how their model is constructed more carefully. For example, in a pharmacodynamic model:</p>
<p><code>PD = PD_BASELINE + PD_BETA\*CP + ETA_PD</code></p>
<p>It may be tempting to try to write this as a <code>{type is linear, … }</code> relationship with CP as a covariate, but recall that covariates may not be time-varying, and CP would almost certainly break this rule.</p>
<p>If we encode <code>GRP_PD = POP_BASELINE + POP_BETA\*CP</code> as a <code>GROUP_VARIABLE</code> and then add ETA_PD in <a href="model-object.html#individual_variables"><code>INDIVIDUAL_VARIABLES</code></a> using the <code>{type is general, … }</code> form then the GRP_PD is also time-varying.</p>
<p><code>INDIV_PD : {type is linear, pop = GRP_PD, ranEff = [ETA_PD])</code></p>
<p>However if we break the above model into components, then we can use <code>{type is linear, … }</code> to express an individual baseline</p>
<p><code>INDIV_BASE : {type is linear, pop = POP_BASELINE, ranEff = ETA_BASE)</code></p>
<p><code>INDIV_BETA : {type is linear, pop = POP_BETA, ranEff = ETA_BETA)</code></p>
<p>We can then move the linear relationship with CP to the <a href="model-object.html#model_prediction"><code>MODEL_PREDICTION</code></a> block</p>
<pre><code>MODEL_PREDICTION{
  PD = INDIV_BASE + INDIV_BETA\*CP
  }</code></pre>
<p>Using the <a href="model-object.html#individual_variables"><code>INDIVIDUAL_VARIABLES</code></a> block to define individual parameters which are then used in <a href="model-object.html#model_prediction"><code>MODEL_PREDICTION</code></a> should allow most models to be interoperable.</p>
</div>
</div>
<div id="model_prediction" class="section level2">
<h2><span class="header-section-number">4.10</span> <code>MODEL_PREDICTION</code></h2>
<p>The <a href="model-object.html#model_prediction"><code>MODEL_PREDICTION</code></a> block is where the structural model predictions are defined. Calculations use mathematical expressions that may involve the population parameters (structural) as well as group and individual variables (parameters).</p>
<p>If a <a href="model-object.html#model_prediction"><code>MODEL_PREDICTION</code></a> block is not supplied this is not an error but requires that any prediction referred to in the <a href="model-object.html#observation"><code>OBSERVATION</code></a> blocks has been defined using variables in a <a href="model-object.html#group_variables"><code>GROUP_VARIABLES</code></a> or INDIVIDUAL_VARIABLE block.</p>
<p>For example below we present the <a href="model-object.html#model_prediction"><code>MODEL_PREDICTION</code></a> block using variables DOSE, V, CL, V and TIME.</p>
<pre><code> MODEL_PREDICTION{
 DOSE::dosingVar # recall that DOSE must be declared before use in
 analytical models.
 CONC=DOSE/V*exp(-CL/V*TIME)
 }</code></pre>
<p>If a DEQ sub-block is specified then variables calculated within the DEQ sub-block can be referred to outside of this block to calculate the model prediction. An example is given below.</p>
<p>To ensure interoperability, any variable used in the <a href="model-object.html#model_prediction"><code>MODEL_PREDICTION</code></a> block must be either:</p>
<ul>
<li>the independent variable</li>
<li>defined in <a href="model-object.html#model_prediction"><code>MODEL_PREDICTION</code></a></li>
<li>declared in INDIVIDUAL_VARIABLES using {type is linear, … }</li>
<li>defined as “use is variable in the DATA_INPUT_VARIABLES block of the Data Object</li>
</ul>
<p>This implies in particular that <a href="model-object.html#structural_parameters"><code>STRUCTURAL_PARAMETERS</code></a>, <a href="model-object.html#variability_parameters"><code>VARIABILITY_PARAMETERS</code></a>, <a href="model-object.html#group_variables"><code>GROUP_VARIABLES</code></a> and random variables defined in <code>RANDOM_VARIABLES_DEFINITION</code> cannot be used in <a href="model-object.html#model_prediction"><code>MODEL_PREDICTION</code></a>.</p>
<div id="deq" class="section level3">
<h3><span class="header-section-number">4.10.1</span> <code>DEQ</code></h3>
<p>Use of a <a href="model-object.html#deq"><code>DEQ</code></a> sub-block is optional – differential equations may be used anywhere in the <a href="model-object.html#model_prediction"><code>MODEL_PREDICTION</code></a> block – but it is encouraged to use this sub-block for clarity and readability of the resulting code.</p>
<p>The <a href="model-object.html#deq"><code>DEQ</code></a> sub-block specifies the structural model through differential equations. The general form is</p>
<pre><code>&lt;VARIABLE&gt; : { deriv = &lt;expression&gt;, init = &lt;Real number&gt;,
                x0 = &lt;Real number&gt; }</code></pre>
<p>The <a href="model-object.html#deq"><code>DEQ</code></a> sub-block combines equations and differential equations and the resulting system of equations is integrated across the independent variable, usually time.</p>
<p><code>init = &lt;Real number&gt;</code> is the initial value of the differential equation</p>
<p><code>x0 = &lt;Real number&gt;</code> is the starting value of the integrator. For most systems involving time, this is zero.</p>
<p>By default, <code>init = 0</code> and <code>x0 = 0</code>. If the default is to be used, these arguments can be dropped from specification of the differential equation.</p>
<p>For example:</p>
<pre><code>MODEL_PREDICTION {
DEQ{
 RATEIN = if(T &gt;= TLAG) then GUT \* KA
 else 0
 GUT : { deriv =(- RATEIN), init = 0, x0 = 0 }
 CENTRAL : { deriv =(RATEIN - CL \* CENTRAL / V) }
 }
 CC = CENTRAL / V
 } # end MODEL_PREDICTION</code></pre>
</div>
<div id="on-tlag-and-bioavailability" class="section level3">
<h3><span class="header-section-number">4.10.2</span> On Tlag and Bioavailability</h3>
<p>Since MDL has no reserved variable names, there is no mechanism for target software to identify lagtime and bioavailability. . Models with lag times and bioavailability must use the <a href="model-object.html#compartment"><code>COMPARTMENT</code></a> sub-block to specify these input attributes.</p>
</div>
<div id="compartment" class="section level3">
<h3><span class="header-section-number">4.10.3</span> <code>COMPARTMENT</code></h3>
<p>The <a href="model-object.html#compartment"><code>COMPARTMENT</code></a> sub-block is intended to provide the user with a modular approach to describe PK processes through definition of the drug input, distribution, and elimination processes. The functions defined are influenced by the PK macros approach in Monolix. The table below shows how the Compartment definitions in MDL correspond to PK Macros as defined in Monolix.</p>
<table>
<thead>
<tr class="header">
<th><strong>MDL Compartment</strong></th>
<th><strong>Monolix PK Macros</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>direct</td>
<td>iv</td>
</tr>
<tr class="even">
<td>depot</td>
<td>absorption</td>
</tr>
<tr class="odd">
<td>elimination</td>
<td>elimination</td>
</tr>
<tr class="even">
<td>distribution</td>
<td>peripheral</td>
</tr>
<tr class="odd">
<td>effect</td>
<td>effect</td>
</tr>
<tr class="even">
<td>transfer</td>
<td>transfer</td>
</tr>
<tr class="odd">
<td>compartment</td>
<td>compartment</td>
</tr>
</tbody>
</table>
<p>The major differences over the implementation in Monolix are that in MDL, the “from and “to attributes define the links between compartments and processes and that there are no reserved names for compartments or variables e.g. using “K12 and “K21 as variable names confers no special meaning to the use of these variables.</p>
<p><a href="model-object.html#compartment"><code>COMPARTMENT</code></a> definitions are translated into PK Macros in Monolix and where possible they are mapped to ADVAN closed-form solutions in NONMEM.</p>
<p><a href="model-object.html#compartment"><code>COMPARTMENT</code></a> sub-block processes are specified as lists with attributes depending on the processes being described.</p>
<div id="input-absorption" class="section level4">
<h4><span class="header-section-number">4.10.3.1</span> Input &amp; absorption</h4>
<p>There are two <a href="model-object.html#compartment"><code>COMPARTMENT</code></a> block processes describing input to the system (typically drug input). These are direct and depot. direct defines bolus or zero-order input processes, while depot describes first-order, zero-order or transit chain drug input processes.</p>
<p>Input format is of the form:</p>
<pre><code>&lt;VARIABLE NAME&gt; : { type is &lt;depot / direct&gt;,
                    to = &lt;VARIABLE&gt;,
                    &lt;other arguments&gt; }</code></pre>
<p>The other arguments depend on the process being described. The table below describes the possible combinations of attributes for different input and absorption processes.</p>
<table>
<thead>
<tr class="header">
<th><strong>Compartment Type</strong></th>
<th><strong>Attribute Combination</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Direct</td>
<td>to, modelDur(O), tlag(O), finput(O)</td>
</tr>
<tr class="even">
<td>Depot</td>
<td>to, ka, tlag(O), finput(O)</td>
</tr>
<tr class="odd">
<td></td>
<td>to, modelDur, tlag(O), finput(O)</td>
</tr>
<tr class="even">
<td></td>
<td>to, ka, ktr, mtt</td>
</tr>
<tr class="odd">
<td></td>
<td>to, modelDur, ktr, mtt</td>
</tr>
</tbody>
</table>
<p>( O ) = Optional attribute</p>
<pre><code>INPUT_KA : {type is depot, to=CENTRAL, ka=KA,
            tlag=ALAG1, finput=F1}</code></pre>
</div>
<div id="distribution-processes" class="section level4">
<h4><span class="header-section-number">4.10.3.2</span> Distribution processes</h4>
<p>MDL defines drug distribution (movement of drug between compartments) through <a href="model-object.html#compartment"><code>COMPARTMENT</code></a> block definitions with type compartment, distribution.</p>
<p><code>type is compartment</code> is used to define PK compartments which have an associated input and elimination process. Peripheral compartments with <code>type is distribution</code> will not have <code>type is input</code> or <code>type is elimination</code> processes associated with them.</p>
<p>The syntax is:</p>
<p><code>&lt;VARIABLE NAME&gt; : { type is compartment }</code></p>
<p>The modelCmt argument is not used.</p>
<p>For example:</p>
<p><code>CENTRAL : { type is compartment }</code></p>
<p>Compartments where the transfer of drug in and out is defined through model variables have <code>type is distribution</code>.</p>
<pre><code> &lt;VARIABLE NAME&gt; : {type is distribution, from = &lt;VARIABLE NAME&gt;, 
                    kin = &lt;VARIABLE NAME&gt;, kout = &lt;VARIABLE NAME&gt; }</code></pre>
<p>For example, to specify a peripheral compartment in a two compartment PK model:</p>
<p><code>PERIPHERAL : {type is distribution, from=CENTRAL, kin=Q/V2, kout=Q/V3}</code></p>
<p>A “type is effect process provides a means to describe the transfer of amounts from a given compartment to an effect compartment e.g. for use with PD models.</p>
<p><code>&lt;VARIABLE NAME&gt; : {type is effect, from = &lt;VARIABLE&gt; NAME&gt;, keq = &lt;VARIABLE NAME&gt;}</code></p>
<table>
<thead>
<tr class="header">
<th><strong>Compartment Type</strong></th>
<th><strong>Attribute Combination</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>distribution</td>
<td>from, kin, kout</td>
</tr>
<tr class="even">
<td>compartment</td>
<td></td>
</tr>
<tr class="odd">
<td>effect</td>
<td>from, keq</td>
</tr>
</tbody>
</table>
</div>
<div id="elimination-and-transfer-processes" class="section level4">
<h4><span class="header-section-number">4.10.3.3</span> Elimination and transfer processes</h4>
<p>Elimination is defined via a list with “type is elimination and specification of the compartment from which drug is eliminated along with variable names for the volume of distribution in the compartment from which drug is eliminated and the micro constant or apparent clearance from the compartment.</p>
<p>If the amount of eliminated drug is not of interest, it is not necessary to name this process. If this is the case, an anonymous list must be used:</p>
<pre><code> :: { type is elimination, from = &lt;VARIABLE NAME&gt;, v = &lt;VARIABLE NAME&gt;, 
        &lt;k / cl&gt; = &lt;VARIABLE NAME&gt; }</code></pre>
<p>For example in the one compartment model:</p>
<p><code>:: {type is elimination, from=CENTRAL, v=V, cl=CL}</code></p>
<p>Note that the v argument refers to the volume of distribution in the compartment defined by the from argument.</p>
<p>A “type is transfer process has also been provided which defines the one-way transfer of drug amounts from one compartment to another.</p>
<pre><code>&lt;VARIABLE NAME&gt; : {type is transfer, from = &lt;VARIABLE NAME&gt;, 
                    to = &lt;VARIABLE NAME&gt;, kt = &lt;VARIABLE NAME&gt; }</code></pre>
<p>For example: <code>:: {type is transfer, from=LATENT, to=CENTRAL, kt=K23}</code></p>
<table>
<thead>
<tr class="header">
<th><strong>Compartment Type</strong></th>
<th><strong>Attribute Combination</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>elimination</td>
<td>from, v, k</td>
</tr>
<tr class="even">
<td></td>
<td>from, v, cl</td>
</tr>
<tr class="odd">
<td></td>
<td>from, vm, km</td>
</tr>
<tr class="even">
<td>transfer</td>
<td>from, to, kt</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="combining-compartment-and-deq-blocks" class="section level2">
<h2><span class="header-section-number">4.11</span> Combining <a href="model-object.html#compartment"><code>COMPARTMENT</code></a> and <a href="model-object.html#deq"><code>DEQ</code></a> blocks</h2>
<p>It is possible to use <a href="model-object.html#compartment"><code>COMPARTMENT</code></a> to describe the input processes for differential equations in the <a href="model-object.html#deq"><code>DEQ</code></a> block. Using the <code>type is depot</code> or <code>type is direct</code> compartments allows the user to specify lag time and bioavailability (tlag and finput) which will translate to appropriate terms in target software e.g. ALAGn and Fn in NM-TRAN. If the <a href="model-object.html#compartment"><code>COMPARTMENT</code></a> specification is not used then model parameters are treated in a very general way and there is no way of mapping these to target tools to implement these input attributes.</p>
<p>If the <a href="model-object.html#compartment"><code>COMPARTMENT</code></a> sub-block is not used then delay absorption processes and/or bioavailability needs to be explicitly encoded.</p>
<p>For example in UseCase4 differential equations are used to describe IV and oral administration. The time of dosing DT is passed either from the data or via <code>DATA_DERIVED_VARIABLES</code> (see section 2.5):</p>
<pre><code>MODEL_PREDICTION {
  DT
  DEQ{
    RATEIN = if(T-DT &gt;= TLAG) then GUT * KA
    else 0
    GUT : { deriv =(- RATEIN), init = 0, x0 = 0 }
    CENTRAL : { deriv =(RATEIN * FORAL - CL * CENTRAL / V), init = 0, x0 = 0 }
}
CC = CENTRAL / V
} # end MODEL_PREDICTION</code></pre>
<p>In the above example, note that there is a discontinuity in RATEIN which is not well handled with differential equations. Note also that the model does not handle multiple doses since then DT (time of dose) and hence RATEIN would be reset to zero for each new dose.</p>
<p>To alleviate this problem, we can use <a href="model-object.html#compartment"><code>COMPARTMENT</code></a> with <a href="model-object.html#deq"><code>DEQ</code></a> to handle the input processes correctly. The code below shows how to include lag time and bioavailability in a model using differential equations (UseCase4_2):</p>
<pre><code>MODEL_PREDICTION {
COMPARTMENT{
  INPUT_KA : {type is depot, to=CENTRAL, ka=KA, finput=FORAL, tlag=TLAG}
  INPUT_CENTRAL : {type is direct, to = CENTRAL}
}

DEQ{
  CENTRAL : { deriv =( - CL \* CENTRAL / V), init = 0, x0 = 0 }
  }
CC = CENTRAL / V
} # end MODEL_PREDICTION</code></pre>
<p>(Note that this model is not exactly equivalent to UseCase4 which does not allow for superposition of dosing). Note the first-order input to the CENTRAL compartment (INPUT_KA) is <code>type is depot</code> while the bolus or zero-order rate input (INPUT_CENTRAL) is <code>type is direct</code>.</p>
<p>The model corresponding to UseCase4 is shown below (UseCase4_3). In this case there is an explicit differential equation for the depot compartment (GUT)</p>
<pre><code>MODEL_PREDICTION {
COMPARTMENT{
INPUT_KA : {type is direct, to = GUT, finput=FORAL,
tlag=TLAG}
INPUT_CENTRAL : {type is direct, to = CENTRAL}
}

DEQ{
GUT : { deriv =(- GUT \* KA), init = 0, x0 = 0 }
CENTRAL : { deriv =(GUT \* KA - CL \* CENTRAL / V), init = 0,
x0 = 0 }
}
CC = CENTRAL / V
} # end MODEL_PREDICTION</code></pre>
<p>In the code above, note that both administrations use <code>type is direct</code>, but the oral administration (INPUT_KA) has finput and tlag specified. In contrast to the above, the direct input would exactly correspond to the DEQ specification in UseCase4, however the TLAG in UseCase4 is treated as a general parameter, while the TLAG in UseCase4_3 will be translated to ALAGn in NMTRAN.</p>
</div>
<div id="observation" class="section level2">
<h2><span class="header-section-number">4.12</span> <code>OBSERVATION</code></h2>
<p>The <a href="model-object.html#observation"><code>OBSERVATION</code></a> block provides the definition of the outcome variable using the prediction from the <a href="model-object.html#model_prediction"><code>MODEL_PREDICTION</code></a> block and/or <a href="model-object.html#random_variable_definition"><code>RANDOM_VARIABLE_DEFINITION</code></a> at the observation level. Calculations or equations needed for this definition can be defined in the <a href="model-object.html#observation"><code>OBSERVATION</code></a> block e.g. calculation of weights for <code>type is userDefined</code> error models.</p>
<p>If more than one outcome is specified then we specify each outcome separately within the <a href="model-object.html#observation"><code>OBSERVATION</code></a> block. Conditional assignment to outcome definitions is possible if the outcome depends on a covariate or calculated variable. However it is not necessary to conform multiple outcomes to a single observation variable name e.g. Y.</p>
<div id="continuous-outcomes" class="section level3">
<h3><span class="header-section-number">4.12.1</span> Continuous outcomes</h3>
<p>For continuous outcomes the <a href="model-object.html#observation"><code>OBSERVATION</code></a> block defines how a variable from the <a href="model-object.html#model_prediction"><code>MODEL_PREDICTION</code></a> block and <a href="model-object.html#random_variable_definition"><code>RANDOM_VARIABLE_DEFINITION</code></a> providing the residual unexplained random variables are combined in a function to define the outcome.</p>
<p>The mathematical representation of the outcome variable is (after Lavielle, 2014)</p>
<p><span class="math display">\[h\left( y_{\text{ij}} \right) = h\left( f\left( x_{\text{ij}},\psi_{i} \right) \right) + g\left( f\left( x_{\text{ij}}{,\psi}_{i} \right),\ \xi \right)\varepsilon_{\text{ij}}\]</span></p>
<p>Where</p>
<p><span class="math display">\[y_{\text{ij}} = \text{jth}\ \mathrm{\text{observation\ for\ subject}}\ i\]</span></p>
<p><em>h</em> = Transformation of the outcome to ensure that the resulting function is an additive function of <em>f</em> and <em>g.</em> Specfied in MDL error models described below using “trans is <h>. Left hand side transformation is specified using the Boolean lhsTrans.</p>
<p><em>f</em> = structural model prediction from the <a href="model-object.html#model_prediction"><code>MODEL_PREDICTION</code></a> block. Specified in the MDL error models described below through the “prediction argument.</p>
<p><em>g</em> = functional definition of the residual error model. Specified in the MDL error models through the <code>type is additiveError | proportionalError | combinedError1 | combinedError2</code></p>
<p><span class="math inline">\(\psi_{i}\)</span> = individual parameters defined in the INDIVIDUAL_VARIABLES block</p>
<p><span class="math inline">\(x_{i,j}\)</span> = covariates and regression variables e.g. time, concentration etc.</p>
<p><span class="math inline">\(\xi\)</span> = parameters of the residual error model defined in the VARIABILITY_PARAMETERS block and referred to in the appropriate <code>additive</code> and <code>proportional</code> arguments.</p>
<p><span class="math inline">\(\varepsilon_{\text{ij}}\)</span>= residual error defined in <a href="model-object.html#random_variable_definition"><code>RANDOM_VARIABLE_DEFINITION</code></a> block and referred to in the MDL error models described below through the <code>eps</code> argument.</p>
<p>The syntax for definition of continuous outcome variables is:</p>
<pre><code>&lt; OUTCOME VARIABLE NAME&gt; : {type is additiveError |
proportionalError | combinedError1 | combinedError2 | userDefined,
&lt;additional arguments defined in table below&gt; }</code></pre>
<p>The following residual error model functions are defined, as described in MDL Language Reference section 2.21 and reiterated here.</p>
<hr />
<table>
<thead>
<tr class="header">
<th><strong>Name</strong></th>
<th><strong>Return Type</strong></th>
<th><strong>Argument name</strong></th>
<th><strong>Argument Types</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>additiveError</td>
<td>Real</td>
<td>trans (Optional)</td>
<td>Builtin</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td>lhsTrans</td>
<td>Boolean</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td>additive</td>
<td>Real</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td>prediction</td>
<td>Real</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td>eps</td>
<td>Real</td>
</tr>
<tr class="even">
<td>proportionalError</td>
<td>Real</td>
<td>trans (Optional)</td>
<td>Builtin</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td>lhsTrans</td>
<td>Boolean</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td>proportional</td>
<td>Real</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td>prediction</td>
<td>Real</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td>eps</td>
<td>Real</td>
</tr>
<tr class="odd">
<td>combinedError1</td>
<td>Real</td>
<td>trans (Optional)</td>
<td>Builtin</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td>lhsTrans</td>
<td>Boolean</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td>additive</td>
<td>Real</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td>proportional</td>
<td>Real</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td>prediction</td>
<td>Real</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td>eps</td>
<td>Real</td>
</tr>
<tr class="odd">
<td>combinedError2</td>
<td>Real</td>
<td>trans (Optional)</td>
<td>Builtin</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td>lhsTrans</td>
<td>Boolean</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td>additive</td>
<td>Real</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td>proportional</td>
<td>Real</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td>prediction</td>
<td>Real</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td>eps</td>
<td>Real</td>
</tr>
<tr class="odd">
<td>userDefined</td>
<td>Real</td>
<td>value</td>
<td>Real</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td>weight</td>
<td>Real</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td>prediction</td>
<td>Real</td>
</tr>
</tbody>
</table>
<p><code>combinedError1</code> defines the following model:</p>
<p><span class="math display">\[h\left( y_{\text{ij}} \right) = h\left( f\left( x_{\text{ij}},\psi_{i} \right) \right) + \left( a + bf\left( x_{\text{ij}}{,\psi}_{i} \right) \right)\varepsilon_{\text{ij}}\]</span></p>
<p><code>combinedError2</code> defines the following model:</p>
<p><span class="math display">\[h\left( y_{\text{ij}} \right) = h\left( f\left( x_{\text{ij}},\psi_{i} \right) \right) + \sqrt{a^{2} + b^{2}f\left( x_{\text{ij}}{,\psi}_{i} \right)}\varepsilon_{\text{ij}}\]</span></p>
<p>the lhsTrans Boolean argument allows the user to apply transformations to the DV without having to transform the data column prior to analysis.</p>
<p>As with the <code>type is linear</code> and <code>type is general</code> definitions in the <a href="model-object.html#individual_variables"><code>INDIVIDUAL_VARIABLES</code></a> block, we use defined types here to make explicit the relationships between predictions and residual random variable terms to facilitate interoperability between target software.</p>
<p>Use <code>type is userDefined</code> to specify an arbitrary relationship between prediction, the residual error random variable which is typically Normal(0,1), and the with associated function g(.) defined above. Using this form ensures that correct calculation of the weighted residuals can be calculated.</p>
<p>The current version of MDL does not support definition of outcomes with arbitrary functions of variables and random variables. Any equations written in the <a href="model-object.html#observation"><code>OBSERVATION</code></a> block are treated as variables to be used in definition of the observation through a list definition as described above (including UserDefined). If a list definition is not used, then the observation equation may not be translated correctly to the target software tool.</p>
</div>
<div id="discrete-data" class="section level3">
<h3><span class="header-section-number">4.12.2</span> Discrete data</h3>
<p>Discrete data outcomes are described by referencing a suitable distribution for the outcome. In this version of MDL we assume that the parameters of the relevant distributions are supplied either in the data, for example the number of trials, N, in a binomial distribution, or are defined in the <a href="model-object.html#model_prediction"><code>MODEL_PREDICTION</code></a> block.</p>
<p>In this version of MDL we assume an identity link for all models – that is the parameter supplied to the distribution must be on the appropriate scale for that distribution – the Poisson rate parameter must have a positive value, probabilities for binary and categorical distributions must be on the scale (0,1).</p>
<p>Count, discrete, categorical outcomes must be specified within the <a href="model-object.html#random_variable_definition"><code>RANDOM_VARIABLE_DEFINITION</code></a> block for the dv level via a suitable ProbOnto distribution (see also section 0). The random variable is then declared in the <a href="model-object.html#observation"><code>OBSERVATION</code></a> block via an anonymous list, as has been seen previously when defining individual variables via the <a href="model-object.html#random_variable_definition"><code>RANDOM_VARIABLE_DEFINITION</code></a> block. Since continuous outcomes have a residual error specified at the DV level, it is inferred that the outcome defined in the <a href="model-object.html#observation"><code>OBSERVATION</code></a> block is at the DV level of variability. However for other types of data, it is less clear that this is the case. Thus we must use <a href="model-object.html#random_variable_definition"><code>RANDOM_VARIABLE_DEFINITION</code></a> to define these outcomes using ProbOnto definitions and then provide additional information in the <a href="model-object.html#observation"><code>OBSERVATION</code></a> block to assign additional attributes.</p>
<p>The syntax is as follows:</p>
<pre><code>RANDOM_VARIABLE_DEFINITION(level=DV){
  &lt;outcome variable&gt; ~ &lt;ProbOnto distribution&gt;
}
  
OBSERVATION{
  :: {type is &lt;count/discrete/categorical&gt;, variable = &lt;outcome variable&gt;}
}# end ESTIMATION</code></pre>
<p>See below for examples pertaining to specific outcome types.</p>
<div id="count-data" class="section level4">
<h4><span class="header-section-number">4.12.2.1</span> Count data</h4>
<p>For count data, we have the following syntax:</p>
<pre><code>RANDOM_VARIABLE_DEFINITION(level=DV){
&lt;variable&gt; ~ &lt;ProbOnto distribution for count data e.g. Poisson1&gt;
}

OBSERVATION{
:: {type is count, variable = &lt;variable&gt;}
}# end ESTIMATION</code></pre>
<p>For example (also showing the appropriate <a href="model-object.html#individual_variables"><code>INDIVIDUAL_VARIABLES</code></a>, <a href="model-object.html#model_prediction"><code>MODEL_PREDICTION</code></a> and <a href="model-object.html#observation"><code>OBSERVATION</code></a> blocks) (UseCase11)</p>
<pre><code>INDIVIDUAL_VARIABLES{
BASECOUNT : {type is linear, trans is ln,
pop = POP_BASECOUNT, ranEff = eta_PPV_EVENT }
BETA = POP_BETA
}# end INDIVIDUAL_VARIABLES

MODEL_PREDICTION{
lnLAMBDA=ln(BASECOUNT) + BETA\*CP
LAMBDA = exp(lnLAMBDA)
}

RANDOM_VARIABLE_DEFINITION(level=DV){
Y ~ Poisson1(rate=LAMBDA)
}

OBSERVATION{
:: {type is count, variable = Y}
}# end ESTIMATION</code></pre>
<p>Note in the above example that the BASECOUNT variable is specified using the linear function and a natural log transformation on both sides to ensure that BASECOUNT is positive. The linear relationship with CP (plasma concentration) is defined within the <a href="model-object.html#model_prediction"><code>MODEL_PREDICTION</code></a> block. We cannot use CP as a covariate in the <code>linear(…)</code> function as CP varies with time and so is regarded as a regressor rather than a covariate. In UseCase11 since there is no model for the pharmacokinetics we use CP as the independent variable (<a href="model-object.html#idv"><code>IDV</code></a>) in the model and <code>use is idv</code> in the <code>DATA_INPUT_VARIABLES</code> block. We also take exponential of lnLAMBDA to ensure that the variable LAMBDA is on the positive scale before using this in the Poisson distribution.</p>
<p>This is an example where a little consideration of the random effects and model prediction can facilitate interoperability. Writing an equation for the INDVIDUAL_VARIABLES we may have defined</p>
<pre><code>INDIVIDUAL_VARIABLES{
 lnLAMBDA = ln(POP_BASECOUNT) + BETA\*CP + eta_PPV_EVENT
 }</code></pre>
<p>Using this formulation of the model though would not guarantee interoperability with some target software for estimation since the equation for lnLAMBDA is user-defined.</p>
<p>There are many distributions defined in ProbOnto which will describe count data. The diagram below (Figure <a href="model-object.html#fig:ProbOntoPoisson">4.1</a>) illustrates a few of these and relationships between them as described in the ProbOnto Knowledge Base (<a href="http://www.probonto.org">www.probonto.org</a>)</p>
<div class="figure"><span id="fig:ProbOntoPoisson"></span>
<img src="images/ProbOnto_Poisson.png" alt="ProbOnto Poisson distributions" width="100%" />
<p class="caption">
Figure 4.1: ProbOnto Poisson distributions
</p>
</div>
</div>
<div id="binary-data" class="section level4">
<h4><span class="header-section-number">4.12.2.2</span> Binary data</h4>
<p>Similar to count data above, we define the binary outcome and its distribution in a <a href="model-object.html#random_variable_definition"><code>RANDOM_VARIABLE_DEFINITION</code></a> block at the observation level of variability. Note how we define the names of the categories on the left hand side, and then the probability distribution defines the likelihood of the <em>second</em> category.</p>
<pre><code>RANDOM_VARIABLE_DEFINITION(level=DV){
  Y withCategories {&lt;category1&gt;,&lt;category2&gt;} 
     ~ &lt;ProbOnto distribution e.g. Bernoulli | Binomial&gt;
}</code></pre>
<p>For example (again, showing the <a href="model-object.html#individual_variables"><code>INDIVIDUAL_VARIABLES</code></a>, <a href="model-object.html#model_prediction"><code>MODEL_PREDICTION</code></a> and <a href="model-object.html#observation"><code>OBSERVATION</code></a> blocks to show the model construction):</p>
<pre><code>RANDOM_VARIABLE_DEFINITION(level=ID){
  eta_PPV_EVENT ~ Normal(mean=0, var=PPV_EVENT )
}# end RANDOM_VARIABLE_DEFINITION

INDIVIDUAL_VARIABLES{
  indiv_BASE : {type is linear, pop= POP_BASEP,
  ranEff=[eta_PPV_EVENT], trans is logit}
}# end INDIVIDUAL_VARIABLES

MODEL_PREDICTION{
  LP = logit(indiv_BASE) + POP_BETA\*CP
  P1 = invLogit(LP)
}# end MODEL_PREDICTION

RANDOM_VARIABLE_DEFINITION(level=DV){
  Y withCategories {none, event} ~ Bernoulli1(probability=P1)
}

OBSERVATION{
  :: {type is discrete, variable = Y }
}# end ESTIMATION</code></pre>
<p>Note that the <a href="model-object.html#individual_variables"><code>INDIVIDUAL_VARIABLES</code></a> block defines the individual baseline by combining the population parameter and the random effect. Note also that this specification uses a logit transformation to ensure that the individual baseline indiv_BASE variable is on the (0,1) probability scale. Then, the linear regression with plasma concentration (CP) is defined in the <a href="model-object.html#model_prediction"><code>MODEL_PREDICTION</code></a> – Note that CP is not a covariate. Finally LP is back-transformed to the probability scale to give variable P1 which is the probability of an event to be used in the Bernoulli distribution. By defining how the 0,1 in the data correspond to named events {none, event} it is easier to understand exactly what category is being modelled.</p>
<p>An alternative distribution for the same model is the Binomial distribution with one trial:</p>
<pre><code>RANDOM_VARIABLE_DEFINITION(level=DV){
  Y withCategories {none, event} ~ Binomial1(numberOfTrials=1, probability=P1)
}

OBSERVATION{
  :: {type is discrete, variable = Y }
} # end of OBSERVATION</code></pre>
</div>
<div id="categorical-data" class="section level4">
<h4><span class="header-section-number">4.12.2.3</span> Categorical data</h4>
<p>Again, similar to count and binary data, the syntax for Categorical data outcomes is:</p>
<pre><code>RANDOM_VARIABLE_DEFINITION(level=DV){
&lt;variable&gt; withCategories{ &lt;category1&gt;, …, &lt;categoryk&gt; } 
          ~ &lt;ProbOnto distribution for categorical data
          e.g. CategoricalNonordered1 | CategoricalOrdered1&gt;
}

OBSERVATION{
  :: {type is categorical, variable=&lt;variable&gt;}
}</code></pre>
<p>For example (UseCase13_1):</p>
<pre><code>GROUP_VARIABLES{
  B0 = Lgt0
  B1 = B0 + Lgt1
  B2 = B1 + Lgt2
}

INDIVIDUAL_VARIABLES{
  indiv_B0 : {type is general, grp = B0, ranEff = eta_PPV_EVENT}
  indiv_B1 : {type is general, grp = B1, ranEff = eta_PPV_EVENT}
  indiv_B2 : {type is general, grp = B2, ranEff = eta_PPV_EVENT}
}# end INDIVIDUAL_VARIABLES

MODEL_PREDICTION{
  EDRUG = Beta * CP
  A0 = indiv_B0 + EDRUG
  A1 = indiv_B1 + EDRUG
  A2 = indiv_B2 + EDRUG
  P0 = invLogit(A0)
  P1 = invLogit(A1)
  P2 = invLogit(A2)
  Prob0 = P0
  Prob1 = P1 - P0
  Prob2 = P2 - P1
  Prob3 = 1 - P2
} # end MODEL_PREDICTION

RANDOM_VARIABLE_DEFINITION(level=DV){
  Y withCategories{ none, mild, moderate, severe } 
      ~ CategoricalOrdered1(categoryProb=[Prob0, Prob1, Prob2, Prob3])
}

OBSERVATION{
  :: {type is categorical, variable=Y}
}</code></pre>
<p>In the above code, the cutpoints between categories are defined in the <a href="model-object.html#group_variables"><code>GROUP_VARIABLES</code></a> block (B0, B1, B2) and individual values for these are defined in the <a href="model-object.html#individual_variables"><code>INDIVIDUAL_VARIABLES</code></a> block. The linear effect of CP (plasma concentration) is defined in the <a href="model-object.html#model_prediction"><code>MODEL_PREDICTION</code></a> block and this is added to the individualised cutpoints (A0, A1, A2). These are then back-transformed to the probability scale (P0, P1, P2) and the ordered categorical model is defined by calculating the probability of each category as the difference from the previous category – Prob0, Prob1, Prob2, Prob3.</p>
</div>
</div>
<div id="time-to-event-data" class="section level3">
<h3><span class="header-section-number">4.12.3</span> Time to event data</h3>
<p>Time to event (TTE) models are modelled by specifying the hazard function. The PharmML to target software tool converters handle the translation of the hazard specification to target tool implementation. For some software this involves calculation of the survival function and associated likelihood.</p>
<p>For an arbitrary hazard function λ(t):</p>
<table>
<colgroup>
<col width="29%" />
<col width="70%" />
</colgroup>
<thead>
<tr class="header">
<th>Hazard function</th>
<th><span class="math display">\[\lambda\left( t \right)\]</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Cumulative hazard function</td>
<td><span class="math display">\[\Lambda\left( a,\ b \right) = \ \int_{a}^{b}{\lambda\left( t \right)\text{dt}}\]</span></td>
</tr>
<tr class="even">
<td>Survival function</td>
<td><span class="math display">\[P\left( T &gt; t \right) = e^{- \Lambda\left( t_{0},t \right)}\]</span></td>
</tr>
<tr class="odd">
<td>Probability density function</td>
<td><span class="math display">\[p\left( t \right) = \lambda\left( t \right)e^{- \Lambda\left( t_{0},t \right)}\]</span></td>
</tr>
<tr class="even">
<td>Cumulative distribution function</td>
<td><span class="math display">\[P\left( T &lt; t \right) = \int_{0}^{t}{p\left( s \right)\text{ds}}\]</span></td>
</tr>
</tbody>
</table>
<p>For an introduction to TTE models see Holford (2013) and for a tutorial in implementation in NONMEM and Monolix see Holford and Lavielle, (2011).</p>
<p>The MDL syntax for time to event outcomes is :</p>
<p><code>&lt;OUTCOME VARIABLE NAME&gt; : { type is tte, hazard = &lt;VARIABLE&gt; }</code></p>
<p>For example (UseCase14.mdl):</p>
<pre><code>INDIVIDUAL_VARIABLES{
  BTATRT = POP_BTATRT
  H_BASE = POP_HBASE
}

MODEL_PREDICTION{
  HBASE=H_BASE/365
  HAZTRT=BTATRT * TRT
  HAZ = HBASE * (1+HAZTRT)
} # end MODEL_PREDICTION

OBSERVATION{
  Y : {type is tte, hazard = HAZ }
} # end ESTIMATION</code></pre>
<p>In the above case the hazard and the effect of treatment on the hazard is calculated in the <a href="model-object.html#group_variables"><code>GROUP_VARIABLES</code></a> block. This is then used in the <a href="model-object.html#model_prediction"><code>MODEL_PREDICTION</code></a> block to calculate the hazard for the event. The model outcome variable Y is then defined as having type tte and the hazard calculated in the <a href="model-object.html#model_prediction"><code>MODEL_PREDICTION</code></a> block is passed in as an argument. Specification of the model is then very simple for the user – no calculation of Survival functions nor likelihood is necessary.</p>
<p>In the current MDL, TTE models are able to be handled equally by NONMEM and Monolix. To facilitate this, we impose certain constraints on dataset conventions. There must be a data record at the start of the interval during which the hazard will be integrated. We use <code>DV = 0</code> to denote right censoring and <code>DV = 1</code> to denote an event.</p>
<p>Currently only exact time of event and right censoring is supported in MDL. Future versions will support interval censoring and repeated time to event.</p>
<p>The convention in NONMEM datasets of using MDV to identify the start of the observation period for assessing TTE cannot be used.</p>
</div>
</div>
<div id="functions" class="section level2">
<h2><span class="header-section-number">4.13</span> <code>FUNCTIONS</code></h2>
<p>This block allows users to define their own functions, for example for use with interpolation.</p>
<p>The syntax is as follows:</p>
<pre><code>&lt;function name&gt; :: function(&lt;argument1&gt; :: &lt;argument1 type&gt;,
    &lt;argument2&gt; :: &lt;argument2 type&gt;,
    &lt;argumentk&gt; :: &lt;argumentk type&gt;) :: &lt;function result type&gt;
    is
      &lt;expression using argument1… argumentk&gt;</code></pre>
<p>Specifying the types of each argument and the type of the function result allows validation of the function inputs and outputs.</p>
<p>To call the function, the user types “&amp; before the function name.</p>
<p>For example:</p>
<pre><code>FUNCTIONS{ myInterp::function(t::real, x0::real, t0::real, x1::real,
            t1::real)::real 
            is
              x0
 }

DATA_INPUT_VARIABLES {
  ID : { use is id }
  TIME : { use is idv }
  WT : { use is covariate, interp=&amp;constInterp }
  AGE : { use is covariate, interp=&amp;myInterp }
  }</code></pre>
</div>
<div id="population_parameters" class="section level2">
<h2><span class="header-section-number">4.14</span> <code>POPULATION_PARAMETERS</code></h2>
<p>The <a href="model-object.html#population_parameters"><code>POPULATION_PARAMETERS</code></a> block allows the user to define models and model parameters that exist at the population level. This may be used in hierarchical models to define population parameters when there are additional levels of hieararchy above the individual.</p>
<p>In most “population approach models, the individuals are assumed to be drawn from a population, the characterstics of which are described through fixed and random effect models. Inferences are then made on the “population parameters which we take to be representative of the population from which the individuals are drawn.</p>
<p>In meta-analysis across many studies, regions, demographic populations it may be useful to characterise additional levels of hierarchy characterising how individuals within each study, region or demographic differ systematically (through fixed effect models) and randomly (through variability models). These higher level models can be expressed in the <a href="model-object.html#population_parameters"><code>POPULATION_PARAMETERS</code></a> block.</p>
<p>In the current MDL, population models are defined through combination of <a href="model-object.html#random_variable_definition"><code>RANDOM_VARIABLE_DEFINITION</code></a> and <a href="model-object.html#population_parameters"><code>POPULATION_PARAMETERS</code></a> definitions. In the current MDL expressions (equations) are NOT allowed in the <a href="model-object.html#population_parameters"><code>POPULATION_PARAMETERS</code></a> block.</p>
<p>The <a href="model-object.html#population_parameters"><code>POPULATION_PARAMETERS</code></a> block uses random variables defined in the <a href="model-object.html#random_variable_definition"><code>RANDOM_VARIABLE_DEFINITION</code></a> block. The syntax for the <a href="model-object.html#population_parameters"><code>POPULATION_PARAMETERS</code></a> block is as follows:</p>
<pre><code>POPULATION_PARAMETERS{
  :: {type is &lt; continuous | categorical &gt;, 
      variable = &lt; RANDOM_VARIABLE_DEFINITION variable &gt; }
}</code></pre>
<p>For example (/FourModels/Hierarchical_Model.mdl):</p>
<pre><code>RANDOM_VARIABLE_DEFINITION(level=POP){
  w_pop ~ Normal(mean = ws, sd = gw)
  V_pop ~ Normal(mean = Vs, sd = gV)
} # end RANDOM_VARIABLE_DEFINITION


POPULATION_PARAMETERS{
:: {type is continuous, variable=w_pop}
:: {type is continuous, variable=V_pop}
}

RANDOM_VARIABLE_DEFINITION(level=ID) {
  ETA_BSV_V ~ Normal(mean = 0, sd = omega_V)
  } # end RANDOM_VARIABLE_DEFINITION

INDIVIDUAL_VARIABLES {
  V : {type is linear, trans is ln, pop=V_pop, 
       fixEff={coeff=BETA_WT, cov=WT}, ranEff=ETA_BSV_V}
  } # end INDIVIDUAL_VARIABLES

MODEL_PREDICTION {
  D
  f = D/V * exp(-k*T)
  } # end MODEL_PREDICTION</code></pre>
<p>In the model above, the mean weight for each population is drawn from a Normal random variable. The mean Volume of distribution also varies for each population and is similarly drawn from a Normal random variable. The parameters for inference would be Vs (“global mean of Volume of distribution), gV (between population variability), omega_V (between individual variability), BETA_WT (fixed effect of Weight). V_pop gives the population prediction of Volume of distribution for each population observed in the data, while V gives the individual predicted Volume of distribution.</p>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-Gelman2006">
<p>Gelman, Andrew. 2006. “Prior Distributions for Variance Parameters in Hierarchical Models(Comment on Article by Browne and Draper).” <em>Bayesian Analysis</em> 1. Institute of Mathematical Statistics: 515–34. doi:<a href="https://doi.org/10.1214/06-ba117a">10.1214/06-ba117a</a>.</p>
</div>
<div id="ref-Swat_2016">
<p>Swat, Maciej J., Pierre Grenon, and Sarala Wimalaratne. 2016. “ProbOnto: Ontology and Knowledge Base of Probability Distributions.” <em>Bioinformatics</em> 32 (17). Oxford University Press (OUP): 2719–21. doi:<a href="https://doi.org/10.1093/bioinformatics/btw170">10.1093/bioinformatics/btw170</a>.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="parameter-object.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="task-properties-object.html" class="navigation navigation-next " aria-label="Next page""><i class="fa fa-angle-right"></i></a>

<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ModelDefinitionLanguage/MDLUserGuide/blob/master/05-ModelObject.Rmd",
"text": "Edit"
},
"download": ["MDL_UserGuide_and_ReferenceManual.pdf", "MDL_UserGuide_and_ReferenceManual.epub"],
"toc": {
"collapse": "subsection",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
},
"search": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
